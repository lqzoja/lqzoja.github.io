
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>SW_Wind&#39;s blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="SW_Wind">
    

    
    <meta property="og:type" content="website">
<meta property="og:title" content="SW_Wind's blog">
<meta property="og:url" content="http://swwind.github.io/page/3/index.html">
<meta property="og:site_name" content="SW_Wind's blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SW_Wind's blog">

    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <style type="text/css">
      ::selection {
        background:#7F7F7F;
      }
      pre {
        tab-size:4;
      }
    </style>
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="SW_Wind&#39;s blog" title="SW_Wind&#39;s blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="SW_Wind&#39;s blog">SW_Wind&#39;s blog</a></h1>
				<h2 class="blog-motto">Do you like Minecraft?</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:swwind.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/10/BZOJ-4766-文艺计算姬/" title="BZOJ 4766: 文艺计算姬" itemprop="url">BZOJ 4766: 文艺计算姬</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SW_Wind" target="_blank" itemprop="author">SW_Wind</a>
		
  <p class="article-time">
    <time datetime="2017-04-10T02:29:36.000Z" itemprop="datePublished"> 发表于 2017-04-10</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>“奋战三星期，造台计算机”。小W响应号召，花了三星期造了台文艺计算姬。文艺计算姬比普通计算机有更多的艺术细胞。普通计算机能计算一个带标号完全图的生成树个数，而文艺计算姬能计算一个带标号完全二分图的生成树个数。更具体地，给定一个一边点数为n，另一边点数为m，共有n*m条边的带标号完全二分图K_{n,m}，计算姬能快速算出其生成树个数。小W不知道计算姬算的对不对，你能帮助他吗？</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>仅一行三个整数n,m,p，表示给出的完全二分图K_{n,m}<br>1 &lt;= n,m,p &lt;= 10^18</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>仅一行一个整数，表示完全二分图K_{n,m}的生成树个数，答案需要模p。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>2 3 7</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>5</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p><a href="http://www.cnblogs.com/neighthorn/p/6568410.html" target="_blank" rel="external">orz NeighThorn</a><br>答案其实就是m^(n-1)*n^(m-1)…<br>此外还要用到<strong>快速乘</strong>。？？一个长得和快速幂有点像的东西，可以防止乘法溢出。。<br>为毛他不开long long也能过得去啊(ノ=Д=)ノ┻━┻</p>
<p>4.13:我靠，他有#define int long long啊(ノ=Д=)ノ┻━┻</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line">ll n, m, p;</div><div class="line"><span class="function">ll <span class="title">mul</span><span class="params">(ll x, ll y)</span></span>&#123;</div><div class="line">	ll ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(y)&#123;</div><div class="line">		<span class="keyword">if</span>(y&amp;<span class="number">1</span>) ans = (ans+x)%p;</div><div class="line">		x = (x&lt;&lt;<span class="number">1</span>)%p; y &gt;&gt;= <span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"><span class="function">ll <span class="title">f</span><span class="params">(ll x, ll y)</span></span>&#123;</div><div class="line">	ll ans = <span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(y)&#123;</div><div class="line">		<span class="keyword">if</span>(y&amp;<span class="number">1</span>) ans = mul(ans, x);</div><div class="line">		x = mul(x, x); y &gt;&gt;= <span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; p;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; mul(f(n, m<span class="number">-1</span>), f(m, n<span class="number">-1</span>)) &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/图论/">图论</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/10/BZOJ-2002-Hnoi2010-Bounce-弹飞绵羊/" title="BZOJ 2002: [Hnoi2010]Bounce 弹飞绵羊" itemprop="url">BZOJ 2002: [Hnoi2010]Bounce 弹飞绵羊</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SW_Wind" target="_blank" itemprop="author">SW_Wind</a>
		
  <p class="article-time">
    <time datetime="2017-04-10T00:44:29.000Z" itemprop="datePublished"> 发表于 2017-04-10</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>某天，Lostmonkey发明了一种超级弹力装置，为了在他的绵羊朋友面前显摆，他邀请小绵羊一起玩个游戏。游戏一开始，Lostmonkey在地上沿着一条直线摆上n个装置，每个装置设定初始弹力系数ki，当绵羊达到第i个装置时，它会往后弹ki步，达到第i+ki个装置，若不存在第i+ki个装置，则绵羊被弹飞。绵羊想知道当它从第i个装置起步时，被弹几次后会被弹飞。为了使得游戏更有趣，Lostmonkey可以修改某个弹力装置的弹力系数，任何时候弹力系数均为正整数。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第一行包含一个整数n，表示地上有n个装置，装置的编号从0到n-1,接下来一行有n个正整数，依次为那n个装置的初始弹力系数。第三行有一个正整数m，接下来m行每行至少有两个数i、j，若i=1，你要输出从j出发被弹几次后被弹飞，若i=2则还会再输入一个正整数k，表示第j个弹力装置的系数被修改成k。<br>对于20%的数据n,m&lt;=10000。<br>对于100%的数据n&lt;=200000,m&lt;=100000。</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>对于每个i=1的情况，你都要输出一个需要的步数，占一行。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>4<br>1 2 1 1<br>3<br>1 1<br>2 1 1<br>1 1</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>2<br>3</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>这题有两种做法。。但我只会分块。。LCT太恶心了，看了一个晚上就是看不懂他在干什么。。没事rever个毛线啊（听说是为了保证复杂度。。）<br>分块的话，直接一个块一个块跳。。具体我就不说了（<del>别问我怎么这么像hzwer的</del></p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200020</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&gt;<span class="string">'9'</span>||ch&lt;<span class="string">'0'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&lt;=<span class="string">'9'</span>&amp;&amp;ch&gt;=<span class="string">'0'</span>)&#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> n, st[N], pt[N], a[N], l[<span class="number">1020</span>], pos[N];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> block = <span class="built_in">sqrt</span>(n = read());</div><div class="line">	<span class="keyword">int</span> cnt = n/block;</div><div class="line">	<span class="keyword">if</span>(n%block) cnt++;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</div><div class="line">		a[i] = read();</div><div class="line">		pos[i] = (i<span class="number">-1</span>)/block+<span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++)</div><div class="line">		l[i] = (i<span class="number">-1</span>)*block+<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = n; i; i--)</div><div class="line">		<span class="keyword">if</span>(i+a[i]&gt;n) st[i] = <span class="number">1</span>;</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(pos[i]==pos[i+a[i]])</div><div class="line">			st[i] = st[i+a[i]]+<span class="number">1</span>, pt[i] = pt[i+a[i]];</div><div class="line">		<span class="keyword">else</span> st[i] = <span class="number">1</span>, pt[i] = i+a[i];</div><div class="line">	<span class="keyword">int</span> m = read();</div><div class="line">	<span class="keyword">while</span>(m--)&#123;</div><div class="line">		<span class="keyword">int</span> op = read(), x = read()+<span class="number">1</span>, y = <span class="number">0</span>;</div><div class="line">		<span class="keyword">if</span>(op == <span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">while</span>(x)&#123;</div><div class="line">				y += st[x];</div><div class="line">				x = pt[x];</div><div class="line">			&#125;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, y);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span>&#123;</div><div class="line">			a[x] = read();</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = x; i &gt;= l[pos[x]]; i--)</div><div class="line">				<span class="keyword">if</span>(pos[i]==pos[i+a[i]])</div><div class="line">					st[i] = st[i+a[i]]+<span class="number">1</span>, pt[i] = pt[i+a[i]];</div><div class="line">				<span class="keyword">else</span> st[i] = <span class="number">1</span>, pt[i] = i+a[i];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="LCT做法-4-14-Update"><a href="#LCT做法-4-14-Update" class="headerlink" title="LCT做法 (4.14 Update)"></a>LCT做法 (4.14 Update)</h1><p>学过了才发现不过如此<br>跑的比分块慢多了<br><del>别问我怎么还是很像hzwer的</del><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 200020</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&gt;<span class="string">'9'</span>||ch&lt;<span class="string">'0'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&lt;=<span class="string">'9'</span>&amp;&amp;ch&gt;=<span class="string">'0'</span>)&#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> c[N][<span class="number">2</span>], fa[N], rev[N], st[N], sz[N], nxt[N];</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isroot</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">return</span> c[fa[x]][<span class="number">0</span>] != x &amp;&amp; c[fa[x]][<span class="number">1</span>] != x;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_down</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(!rev[x])<span class="keyword">return</span>;</div><div class="line">	rev[x] ^= <span class="number">1</span>;</div><div class="line">	rev[c[x][<span class="number">0</span>]] ^= <span class="number">1</span>;</div><div class="line">	rev[c[x][<span class="number">1</span>]] ^= <span class="number">1</span>;</div><div class="line">	swap(c[x][<span class="number">0</span>], c[x][<span class="number">1</span>]);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_up</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	sz[x] = sz[c[x][<span class="number">0</span>]]+sz[c[x][<span class="number">1</span>]]+<span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> y = fa[x], z = fa[y];</div><div class="line">	<span class="keyword">int</span> r = c[y][<span class="number">0</span>] == x, l = r^<span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(!isroot(y)) c[z][c[z][<span class="number">0</span>]!=y] = x;</div><div class="line">	fa[x] = z; fa[y] = x; fa[c[x][r]] = y;</div><div class="line">	c[y][l] = c[x][r]; c[x][r] = y;</div><div class="line">	push_up(y); push_up(x);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">splay</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> top = <span class="number">0</span>; st[++top]=x;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = x; !isroot(i); i=fa[i])</div><div class="line">		st[++top] = fa[i];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = top; i; i--)</div><div class="line">		push_down(st[i]);</div><div class="line">	<span class="keyword">while</span>(!isroot(x))&#123;</div><div class="line">		<span class="keyword">int</span> y = fa[x], z = fa[y];</div><div class="line">		<span class="keyword">if</span>(!isroot(y))<span class="keyword">if</span>(c[y][<span class="number">0</span>]==x^c[z][<span class="number">0</span>]==y)rotate(x);</div><div class="line">		<span class="keyword">else</span> rotate(y);</div><div class="line">		rotate(x);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">access</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> t = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(x)&#123;</div><div class="line">		splay(x);</div><div class="line">		c[x][<span class="number">1</span>] = t;</div><div class="line">		t = x; x = fa[x];</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">rever</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	access(x);splay(x);</div><div class="line">	rev[x]^=<span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">link</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">	rever(x);</div><div class="line">	fa[x] = y;</div><div class="line">	splay(x);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">cut</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">	rever(x); access(y); splay(y);</div><div class="line">	c[y][<span class="number">0</span>] = fa[x] = <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	access(x); splay(x);</div><div class="line">	<span class="keyword">int</span> y = x;</div><div class="line">	<span class="keyword">while</span>(c[y][<span class="number">0</span>])y=c[y][<span class="number">0</span>];</div><div class="line">	<span class="keyword">return</span> y;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> n = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>,x; i &lt;= n; i++)&#123;</div><div class="line">		nxt[i] = (x=read())+i;</div><div class="line">		sz[i] = <span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span>(nxt[i] &gt; n) nxt[i] = n+<span class="number">1</span>;</div><div class="line">		fa[i] = nxt[i];</div><div class="line">	&#125;</div><div class="line">	sz[n+<span class="number">1</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">int</span> m = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)&#123;</div><div class="line">		<span class="keyword">if</span>(read()==<span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">int</span> x = read()+<span class="number">1</span>;</div><div class="line">			rever(n+<span class="number">1</span>); access(x); splay(x);</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sz[c[x][<span class="number">0</span>]]);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span>&#123;</div><div class="line">			<span class="keyword">int</span> x = read()+<span class="number">1</span>, y = read();</div><div class="line">			<span class="keyword">int</span> t = min(x+y, n+<span class="number">1</span>);</div><div class="line">			cut(x, nxt[x]); link(x, nxt[x]=t);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/分块/">分块</a><a href="/tags/LCT/">LCT</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/07/BZOJ-3744-Gty的妹子序列/" title="BZOJ 3744: Gty的妹子序列" itemprop="url">BZOJ 3744: Gty的妹子序列</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SW_Wind" target="_blank" itemprop="author">SW_Wind</a>
		
  <p class="article-time">
    <time datetime="2017-04-07T01:05:58.000Z" itemprop="datePublished"> 发表于 2017-04-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>我早已习惯你不在身边，<br>人间四月天 寂寞断了弦。<br>回望身后蓝天，<br>跟再见说再见……<br>某天,蒟蒻Autumn发现了从 Gty的妹子树(bzoj3720) 上掉落下来了许多妹子,他发现<br>她们排成了一个序列,每个妹子有一个美丽度。<br>Bakser神犇与他打算研究一下这个妹子序列,于是Bakser神犇问道:”你知道区间<br>[l,r]中妹子们美丽度的逆序对数吗?”<br>蒟蒻Autumn只会离线乱搞啊……但是Bakser神犇说道:”强制在线。”<br>请你帮助一下Autumn吧。<br>给定一个正整数序列a,对于每次询问,输出al…ar中的逆序对数,强制在线。、</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第一行包括一个整数n(1&lt;=n&lt;=50000),表示数列a中的元素数。<br>第二行包括n个整数a1…an(ai&gt;0,保证ai在int内)。<br>接下来一行包括一个整数m(1&lt;=m&lt;=50000),表示询问的个数。<br>接下来m行,每行包括2个整数l、r(1&lt;=l&lt;=r&lt;=n),表示询问al…ar中的逆序<br>对数(若ai&gt;aj且i&lt;j,则为一个逆序对)。<br>l,r要分别异或上一次询问的答案(lastans),最开始时lastans=0。<br>保证涉及的所有数在int内。</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>对每个询问,单独输出一行,表示al…ar中的逆序对数。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>4<br>1 4 2 3<br>1<br>2 4</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>2</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>分块即可。（布吉岛的自己百度<br>就系把长度为 N 的序列分成 sqrt(N) 块啊，把这些块里的逆序对个数都预处理出来。<br>然后询问时多粗来的暴力求就好了嘛。。<br>问我怎么预处理？也是暴力啊、、<br>11784ms（把 i++ 都改成 ++i 会变慢。。。）</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 50020</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&gt;<span class="string">'9'</span>||ch&lt;<span class="string">'0'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&lt;=<span class="string">'9'</span>&amp;&amp;ch&gt;=<span class="string">'0'</span>)&#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> n, m, a[N], b[N], val[N];</div><div class="line"><span class="keyword">int</span> pos[N], st[N], rst[<span class="number">250</span>][N], btb[<span class="number">250</span>][<span class="number">250</span>];</div><div class="line"><span class="comment">// 树状数组</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">for</span>(;x&lt;=n;x+=x&amp;-x)++val[x];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(;x;x-=x&amp;-x)ans+=val[x];</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">work</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">	<span class="built_in">memset</span>(val, <span class="number">0</span>, <span class="keyword">sizeof</span> val);</div><div class="line">	<span class="keyword">if</span>(pos[l]==pos[r])&#123;</div><div class="line">		<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(;l&lt;=r;--r)</div><div class="line">			ans += ask(a[r]<span class="number">-1</span>), add(a[r]);</div><div class="line">		<span class="keyword">return</span> ans;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans = btb[pos[l]+<span class="number">1</span>][pos[r]<span class="number">-1</span>], cnt = st[pos[r]]-st[pos[l]+<span class="number">1</span>];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = st[pos[l]+<span class="number">1</span>]<span class="number">-1</span>; l &lt;= i; --i)&#123;</div><div class="line">		ans += ask(a[i]<span class="number">-1</span>)+rst[pos[r]<span class="number">-1</span>][a[i]<span class="number">-1</span>]-rst[pos[l]][a[i]<span class="number">-1</span>];</div><div class="line">		add(a[i]); ++cnt;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = st[pos[r]]; i &lt;= r; i++)&#123;</div><div class="line">		ans += cnt-ask(a[i])-rst[pos[r]<span class="number">-1</span>][a[i]]+rst[pos[l]][a[i]];</div><div class="line">		add(a[i]); ++cnt;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	n = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		a[i] = b[i] = read();</div><div class="line">	sort(b+<span class="number">1</span>, b+n+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		a[i] = lower_bound(b+<span class="number">1</span>, b+n+<span class="number">1</span>, a[i])-b;</div><div class="line">	<span class="keyword">int</span> size = <span class="built_in">sqrt</span>(n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		pos[i] = (i<span class="number">-1</span>)/size+<span class="number">1</span>;</div><div class="line">	<span class="keyword">int</span> block = pos[n];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= block; i++)</div><div class="line">		st[i] = size*(i<span class="number">-1</span>)+<span class="number">1</span>;</div><div class="line">	st[block+<span class="number">1</span>] = n+<span class="number">1</span>;</div><div class="line">	<span class="comment">// 偶就系要酱紫压行，你来咬偶啊</span></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>, cnt1=<span class="number">0</span>,cnt2=<span class="number">0</span>; i &lt;= block;</div><div class="line">			i++, cnt1=cnt2=<span class="number">0</span>, <span class="built_in">memcpy</span>(rst[i], rst[i<span class="number">-1</span>], <span class="keyword">sizeof</span> rst[i]),</div><div class="line">			<span class="built_in">memset</span>(val, <span class="number">0</span>, <span class="keyword">sizeof</span> val))</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt;= block; j++)</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k = st[j]; k &lt; st[j+<span class="number">1</span>]; k++)&#123;</div><div class="line">				btb[i][j] = (cnt1 += cnt2-ask(a[k]));</div><div class="line">				add(a[k]); ++cnt2, ++rst[j][a[k]];</div><div class="line">			&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= block; i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">2</span>; j &lt;= n; j++)</div><div class="line">			rst[i][j] += rst[i][j<span class="number">-1</span>];</div><div class="line">	<span class="keyword">int</span> m = read(), lastans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(m--)&#123;</div><div class="line">		<span class="keyword">int</span> l=read()^lastans, r=read()^lastans;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, lastans = work(l, r));</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/分块/">分块</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/06/BZOJ-3674-可持久化并查集加强版/" title="BZOJ 3674: 可持久化并查集加强版" itemprop="url">BZOJ 3674: 可持久化并查集加强版</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SW_Wind" target="_blank" itemprop="author">SW_Wind</a>
		
  <p class="article-time">
    <time datetime="2017-04-06T07:15:09.000Z" itemprop="datePublished"> 发表于 2017-04-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>自从zkysb出了可持久化并查集后……<br>hzwer:乱写能AC，暴力踩标程<br>KuribohG：我不路径压缩就过了！<br>ndsf：暴力就可以轻松虐！<br>zky:……</p>
<p>n个集合 m个操作<br>操作：<br>1 a b 合并a,b所在集合<br>2 k 回到第k次操作之后的状态(查询算作操作)<br>3 a b 询问a,b是否属于同一集合，是则输出1否则输出0<br>请注意本题采用强制在线,所给的a,b,k均经过加密,加密方法为x = x xor lastans,lastans的初始值为0<br>0&lt;n,m&lt;=2*10^5</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>5 6<br>1 1 2<br>3 1 2<br>2 1<br>3 0 3<br>2 1<br>3 1 2</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>1<br>0<br>1</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p><del>C++的rope真好用</del></p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</div><div class="line">rope&lt;<span class="keyword">int</span>&gt; *rp[<span class="number">200010</span>]; <span class="comment">// 指针快qwq，把指针改成数组就RE了这又是为什么、、</span></div><div class="line"><span class="keyword">int</span> n, m, a[<span class="number">200100</span>], f, x, y, lastans;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> fa = rp[i] -&gt; at(x);</div><div class="line">	<span class="keyword">if</span>(fa==x) <span class="keyword">return</span> x;</div><div class="line">	<span class="keyword">int</span> f = find(i, fa);</div><div class="line">	<span class="keyword">if</span>(f==fa) <span class="keyword">return</span> f;</div><div class="line">	rp[i] -&gt; replace(x, f);</div><div class="line">	<span class="keyword">return</span> f;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		a[i] = i;</div><div class="line">	rp[<span class="number">0</span>] = <span class="keyword">new</span> rope&lt;<span class="keyword">int</span>&gt;(a, a+n+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)&#123;</div><div class="line">		rp[i] = <span class="keyword">new</span> rope&lt;<span class="keyword">int</span>&gt;(*rp[i<span class="number">-1</span>]);</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;f);</div><div class="line">		<span class="keyword">if</span>(f == <span class="number">1</span>)&#123;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</div><div class="line">			x^=lastans, y^=lastans;</div><div class="line">			x = find(i,x);</div><div class="line">			y = find(i,y);</div><div class="line">			<span class="keyword">if</span>(x != y)</div><div class="line">				rp[i] -&gt; replace(y, x);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(f == <span class="number">2</span>)&#123;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x); x^=lastans;</div><div class="line">			rp[i] = rp[x];</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span>&#123;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</div><div class="line">			x^=lastans, y^=lastans;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, lastans=find(i,x)==find(i,y));</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/STL/">STL</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/06/BZOJ-3110-Zjoi2013-K大数查询/" title="BZOJ 3110: [Zjoi2013]K大数查询" itemprop="url">BZOJ 3110: [Zjoi2013]K大数查询</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SW_Wind" target="_blank" itemprop="author">SW_Wind</a>
		
  <p class="article-time">
    <time datetime="2017-04-06T03:00:15.000Z" itemprop="datePublished"> 发表于 2017-04-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>有N个位置，M个操作。操作有两种，每次操作如果是1 a b c的形式表示在第a个位置到第b个位置，每个位置加入一个数c<br>如果是2 a b c形式，表示询问从第a个位置到第b个位置，第C大的数是多少。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第一行N，M<br>接下来M行，每行形如1 a b c或2 a b c</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>输出每个询问的结果</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>2 5<br>1 1 2 1<br>1 1 2 2<br>2 1 1 2<br>2 1 1 1<br>2 1 2 3</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>1<br>2<br>1</p>
<h1 id="HINT"><a href="#HINT" class="headerlink" title="HINT"></a>HINT</h1><p>【样例说明】</p>
<ul>
<li>第一个操作 后位置 1 的数只有 1 ， 位置 2 的数也只有 1 。</li>
<li>第二个操作 后位置 1 的数有 1 、 2 ，位置 2 的数也有 1 、 2 。</li>
<li>第三次询问 位置 1 到位置 1 第 2 大的数是 1 。</li>
<li>第四次询问 位置 1 到位置 1 第 1 大的数是 2 。</li>
<li>第五次询问 位置 1 到位置 2 第 3 大的数是 1 。‍</li>
</ul>
<p>N,M&lt;=50000,a&lt;=b&lt;=N<br>1操作中abs(c)&lt;=N<br>2操作中c&lt;=Maxlongint</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>线段树套线段树，就是题目有些拗口。。。<br>因为有负数，所以在加的时候要加上一个 n 、询问的时候减去一个 n。<br>然后就可以了。过几天再打一遍，以免自己忘记和加深理解。</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 20000020</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n, m;</div><div class="line"><span class="keyword">int</span> sz, rt[<span class="number">1000010</span>], ls[N], rs[N], tag[N], sum[N];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(!ls[x]) ls[x] = ++sz;</div><div class="line">	<span class="keyword">if</span>(!rs[x]) rs[x] = ++sz;</div><div class="line">	<span class="keyword">int</span> mid = L + R &gt;&gt; <span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(tag[x])&#123;</div><div class="line">		tag[ls[x]] += tag[x];</div><div class="line">		sum[ls[x]] += tag[x]*(mid-L+<span class="number">1</span>);</div><div class="line">		tag[rs[x]] += tag[x];</div><div class="line">		sum[rs[x]] += tag[x]*(R-mid);</div><div class="line">		tag[x] = <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 把l-r的区间都加上1</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(!x) x = ++sz;</div><div class="line">	<span class="keyword">if</span>(L==l&amp;&amp;R==r)&#123;</div><div class="line">		sum[x] += R-L+<span class="number">1</span>;</div><div class="line">		tag[x]++;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	pushdown(x, L, R);</div><div class="line">	<span class="keyword">int</span> mid = L + R &gt;&gt; <span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(r&lt;=mid) insert(ls[x], L, mid, l, r);</div><div class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(l&gt;mid) insert(rs[x], mid+<span class="number">1</span>, R, l, r);</div><div class="line">	<span class="keyword">else</span> insert(ls[x], L, mid, l, mid), insert(rs[x], mid+<span class="number">1</span>, R, mid+<span class="number">1</span>, r);</div><div class="line">	sum[x] = sum[ls[x]]+sum[rs[x]];</div><div class="line">&#125;</div><div class="line"><span class="comment">// 询问l-r区间的和</span></div><div class="line"><span class="function">ll <span class="title">ask</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(!x) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">	<span class="keyword">if</span>(L==l &amp;&amp; R==r) <span class="keyword">return</span> sum[x];</div><div class="line">	pushdown(x, L, R);</div><div class="line">	<span class="keyword">int</span> mid = L + R &gt;&gt; <span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(r&lt;=mid) <span class="keyword">return</span> ask(ls[x], L, mid, l, r);</div><div class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(l&gt;mid) <span class="keyword">return</span> ask(rs[x], mid+<span class="number">1</span>, R, l, r);</div><div class="line">	<span class="keyword">else</span> <span class="keyword">return</span> ask(ls[x], L, mid, l, mid)+ask(rs[x], mid+<span class="number">1</span>, R, mid+<span class="number">1</span>, r);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> val)</span></span>&#123;</div><div class="line">	insert(rt[x], <span class="number">1</span>, n, l, r);</div><div class="line">	<span class="keyword">if</span>(L==R) <span class="keyword">return</span>;</div><div class="line">	<span class="keyword">int</span> mid = L + R &gt;&gt; <span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(val&lt;=mid) insert(x&lt;&lt;<span class="number">1</span>, L, mid, l, r, val);</div><div class="line">	<span class="keyword">else</span> insert(x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, mid+<span class="number">1</span>, R, l, r, val);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> l, <span class="keyword">int</span> r, ll k)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(L==R) <span class="keyword">return</span> L;</div><div class="line">	<span class="keyword">int</span> mid = L + R &gt;&gt; <span class="number">1</span>;</div><div class="line">	ll lefts = ask(rt[x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>], <span class="number">1</span>, n, l, r);</div><div class="line">	<span class="keyword">if</span>(k&gt;lefts) <span class="keyword">return</span> ask(x&lt;&lt;<span class="number">1</span>, L, mid, l, r, k-lefts);</div><div class="line">	<span class="keyword">else</span> <span class="keyword">return</span> ask(x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, mid+<span class="number">1</span>, R, l, r, k);</div><div class="line">&#125;</div><div class="line">ll K;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>, t, l, r, num; i &lt;= m; i++)&#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;t, &amp;l, &amp;r);</div><div class="line">		<span class="keyword">if</span>(t==<span class="number">1</span>)&#123;<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;num);insert(<span class="number">1</span>, <span class="number">0</span>, n&lt;&lt;<span class="number">1</span>, l, r, num+n);&#125;</div><div class="line">		<span class="keyword">else</span>&#123;<span class="built_in">scanf</span>(<span class="string">"%lld"</span>, &amp;K);<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ask(<span class="number">1</span>, <span class="number">0</span>, n&lt;&lt;<span class="number">1</span>, l, r, K)-n);&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/线段树/">线段树</a><a href="/tags/树套树/">树套树</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/06/POJ-2104-K-th-Number/" title="POJ 2104 K-th Number" itemprop="url">POJ 2104 K-th Number</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SW_Wind" target="_blank" itemprop="author">SW_Wind</a>
		
  <p class="article-time">
    <time datetime="2017-04-06T01:29:40.000Z" itemprop="datePublished"> 发表于 2017-04-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>要你求区间k小值</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>n m<br>长度为 n 的原数列<br>l1 r1 k1<br>l2 r2 k2<br>l3 r3 k3<br>…</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>每行一个答案</p>
<h1 id="Simple-Input"><a href="#Simple-Input" class="headerlink" title="Simple Input"></a>Simple Input</h1><p>7 3<br>1 5 2 6 3 7 4<br>2 5 3<br>4 4 1<br>1 7 3</p>
<h1 id="Simple-Output"><a href="#Simple-Output" class="headerlink" title="Simple Output"></a>Simple Output</h1><p>5<br>6<br>3</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>主席树模板题。<br>一个点一个点加入，rt[x]就表示[1-x]的区间。<br>因为主席树是可以相减的，所以sz[r]-sz[l-1]就是[l-r]这个区间。<br>然后瞎搞一波就好了。<br>其实主席树就是线段树的升级版，就是每次增加操作时只更新有改变的节点，所以都是log(n)的。<br>最后还要离散化一下。<br><del>别问我怎么和hzwer的一模一样</del></p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 真是日了POJ，连&lt;bits/stdc++.h&gt;都不支持</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 2000020</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100020</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> ls[N], rs[N], sz[N], lk[N], rk[N]; <span class="comment">// lk和rk是储存边界的</span></div><div class="line"><span class="keyword">int</span> a[M], b[M], rt[M], cnt;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&lt;<span class="string">'0'</span>||ch&gt;<span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span>&amp;&amp;ch&lt;=<span class="string">'9'</span>)&#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> k = ++cnt;</div><div class="line">	lk[k] = l, rk[k] = r;</div><div class="line">	<span class="keyword">if</span>(l == r) <span class="keyword">return</span> k;</div><div class="line">	<span class="keyword">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</div><div class="line">	ls[k] = build(l, mid);</div><div class="line">	rs[k] = build(mid+<span class="number">1</span>, r);</div><div class="line">	<span class="keyword">return</span> k;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> fa, <span class="keyword">int</span> pos)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> k = ++cnt;</div><div class="line">	ls[k] = ls[fa], rs[k] = rs[fa];</div><div class="line">	lk[k] = lk[fa], rk[k] = rk[fa];</div><div class="line">	sz[k] = sz[fa]+<span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(lk[k] == rk[k]) <span class="keyword">return</span> k;</div><div class="line">	<span class="keyword">int</span> mid = lk[k] + rk[k] &gt;&gt; <span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(mid &gt;= pos) ls[k] = insert(ls[fa], pos);</div><div class="line">	<span class="keyword">else</span> rs[k] = insert(rs[fa], pos);</div><div class="line">	<span class="keyword">return</span> k;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> fa, <span class="keyword">int</span> x, <span class="keyword">int</span> k)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(ls[x] == rs[x]) <span class="keyword">return</span> b[lk[x]];</div><div class="line">	<span class="keyword">int</span> cmp = sz[ls[x]]-sz[ls[fa]];</div><div class="line">	<span class="keyword">if</span>(cmp &gt;= k) <span class="keyword">return</span> ask(ls[fa], ls[x], k);</div><div class="line">	<span class="keyword">else</span> <span class="keyword">return</span> ask(rs[fa], rs[x], k-cmp);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> n=read(), m=read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		a[i] = b[i] = read();</div><div class="line">	sort(b+<span class="number">1</span>, b+n+<span class="number">1</span>);</div><div class="line">	rt[<span class="number">0</span>] = build(<span class="number">1</span>, n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		rt[i] = insert(rt[i<span class="number">-1</span>], lower_bound(b+<span class="number">1</span>, b+n+<span class="number">1</span>, a[i])-b);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>,x,y,z; i &lt;= m; i++)&#123;</div><div class="line">		x=read(); y=read(); z=read();</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ask(rt[x<span class="number">-1</span>], rt[y], z));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/主席树/">主席树</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/05/BZOJ-1925-Sdoi2010-地精部落/" title="BZOJ 1925: [Sdoi2010]地精部落" itemprop="url">BZOJ 1925: [Sdoi2010]地精部落</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SW_Wind" target="_blank" itemprop="author">SW_Wind</a>
		
  <p class="article-time">
    <time datetime="2017-04-05T11:26:17.000Z" itemprop="datePublished"> 发表于 2017-04-05</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>传说很久以前，大地上居住着一种神秘的生物：地精。 地精喜欢住在连绵不绝的山脉中。具体地说，一座长度为 N 的山脉 H可分 为从左到右的 N 段，每段有一个独一无二的高度 Hi，其中Hi是1到N 之间的正 整数。 如果一段山脉比所有与它相邻的山脉都高，则这段山脉是一个山峰。位于边 缘的山脉只有一段相邻的山脉，其他都有两段（即左边和右边）。 类似地，如果一段山脉比所有它相邻的山脉都低，则这段山脉是一个山谷。 地精们有一个共同的爱好——饮酒，酒馆可以设立在山谷之中。地精的酒馆 不论白天黑夜总是人声鼎沸，地精美酒的香味可以飘到方圆数里的地方。 地精还是一种非常警觉的生物，他们在每座山峰上都可以设立瞭望台，并轮 流担当瞭望工作，以确保在第一时间得知外敌的入侵。 地精们希望这N 段山脉每段都可以修建瞭望台或酒馆的其中之一，只有满足 这个条件的整座山脉才可能有地精居住。 现在你希望知道，长度为N 的可能有地精居住的山脉有多少种。两座山脉A 和B不同当且仅当存在一个 i，使得 Ai≠Bi。由于这个数目可能很大，你只对它 除以P的余数感兴趣。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>仅含一行，两个正整数 N, P。</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>仅含一行，一个非负整数，表示你所求的答案对P取余 之后的结果。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>4 7</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>3</p>
<h1 id="HINT"><a href="#HINT" class="headerlink" title="HINT"></a>HINT</h1><p><img src="http://www.lydsy.com/JudgeOnline/images/1925.jpg"><br>对于 20%的数据，满足 N≤10；<br>对于 40%的数据，满足 N≤18；<br>对于 70%的数据，满足 N≤550；<br>对于 100%的数据，满足 3≤N≤4200，P≤109。</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>dp+滚动数组。<br>然后就愉快的AC了一道水题。</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n, p, f[<span class="number">2</span>][<span class="number">5000</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;p);</div><div class="line">	f[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>, k=<span class="number">0</span>; i &lt;= n; i++,k^=<span class="number">1</span>)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++)</div><div class="line">			f[k][j] = (f[k][j<span class="number">-1</span>]+f[!k][i-j])%p;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, (f[n&amp;<span class="number">1</span>][n]&lt;&lt;<span class="number">1</span>)%p);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/dp/">dp</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/01/51nod-1714-B君的游戏/" title="51nod 1714 B君的游戏" itemprop="url">51nod 1714 B君的游戏</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SW_Wind" target="_blank" itemprop="author">SW_Wind</a>
		
  <p class="article-time">
    <time datetime="2017-04-01T03:40:43.000Z" itemprop="datePublished"> 发表于 2017-04-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>B君和L君要玩一个游戏。刚开始有n个正整数ai。双方轮流操作。每次操作，选一个正整数x，将其移除，再添加7个数字x1,x2…x7。要求对于xi，满足0&lt;=xi&lt;x且x&amp;xi=xi。注意0不能被选取，所以这个游戏一定会结束，而谁无法操作谁就失败。B君根据自己的经验，认为先手胜率高一点，所以B君是先手。B君想知道自己是否必胜。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第一行一个整数n (1 &lt;= n &lt;= 100000)<br>以下n行n个数ai (0 &lt;= ai &lt; 2^64)</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>如果先手必胜，输出”B”，否则输出”L”。</p>
<h1 id="Simple-Input"><a href="#Simple-Input" class="headerlink" title="Simple Input"></a>Simple Input</h1><p>4<br>1<br>2<br>3<br>4</p>
<h1 id="Simple-Output"><a href="#Simple-Output" class="headerlink" title="Simple Output"></a>Simple Output</h1><p>B</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>考虑到二进制上1的个数相同的数在这个游戏中本质上其实是相同的。统计数组b[k]表示二进制上有k个1的数字个数。当所有的b[k]均为偶数的时候，就是先手必败的局面。先手一次最多可以把八个奇数改为八个偶数，如果先手面对的局面有九个或者九的倍数个奇数，那么先手必败，否则后手必败。</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n, b[<span class="number">70</span>], tot, ans;</div><div class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> x;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++, tot = <span class="number">0</span>)&#123;</div><div class="line">		<span class="built_in">cin</span> &gt;&gt; x;</div><div class="line">		<span class="keyword">for</span>(;x;x-=x&amp;-x)++tot;</div><div class="line">		++b[tot];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">70</span>; i++)ans+=b[i]&amp;<span class="number">1</span>;</div><div class="line">	<span class="built_in">puts</span>(ans%<span class="number">9</span>?<span class="string">"B"</span>:<span class="string">"L"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/博弈论/">博弈论</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/01/洛谷P2734-游戏-A-Game/" title="洛谷P2734 游戏 A Game" itemprop="url">洛谷P2734 游戏 A Game</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SW_Wind" target="_blank" itemprop="author">SW_Wind</a>
		
  <p class="article-time">
    <time datetime="2017-04-01T03:06:34.000Z" itemprop="datePublished"> 发表于 2017-04-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>有如下一个双人游戏:N(2 &lt;= N &lt;= 100)个正整数的序列放在一个游戏平台上，游戏由玩家1开始，两人轮流从序列的任意一端取一个数，取数后该数字被去掉并累加到本玩家的得分中，当数取尽时，游戏结束。以最终得分多者为胜。<br>现在要你编一个执行最优策略的程序，最优策略就是使玩家在与最好的对手对弈时，能得到的在当前情况下最大的可能的总分的策略。你的程序要始终为第二位玩家执行最优策略。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><ul>
<li>第一行: 正整数N, 表示序列中正整数的个数。</li>
<li>第二行至末尾: 用空格分隔的N个正整数（大小为1-200）。</li>
</ul>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>只有一行，用空格分隔的两个整数: 依次为玩家一和玩家二最终的得分。</p>
<h1 id="Simple-Input"><a href="#Simple-Input" class="headerlink" title="Simple Input"></a>Simple Input</h1><p>6<br>4 7 2 9 5 2</p>
<h1 id="Simple-Output"><a href="#Simple-Output" class="headerlink" title="Simple Output"></a>Simple Output</h1><p>18 11</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p><del>博弈论</del>（废话）<br>用f[i][j]表示区间[i,j]中的数全部取完时先手的得分，s[i][j]表示区间[i,j]内所有数的和。</p>
<p align="center"><strong>f[i][j]=max(s[i][j]-f[i+1][j],s[i][j]-f[i][j-1])</strong></p>

<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> a[<span class="number">250</span>], s[<span class="number">250</span>][<span class="number">250</span>], n, f[<span class="number">250</span>][<span class="number">250</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, a+i);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt;= n; j++)</div><div class="line">			s[i][j] = s[i][j<span class="number">-1</span>]+a[j];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = n; i; i--)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</div><div class="line">			f[i][j] = max(s[i][j]-f[i+<span class="number">1</span>][j], s[i][j]-f[i][j<span class="number">-1</span>]);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d %d"</span>, f[<span class="number">1</span>][n], s[<span class="number">1</span>][n]-f[<span class="number">1</span>][n]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/博弈论/">博弈论</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/03/29/用Java编的小游戏———SW（持续更新）/" title="用Java编的小游戏——SW（持续更新）" itemprop="url">用Java编的小游戏——SW（持续更新）</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="SW_Wind" target="_blank" itemprop="author">SW_Wind</a>
		
  <p class="article-time">
    <time datetime="2017-03-29T10:23:48.000Z" itemprop="datePublished"> 发表于 2017-03-29</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>这就是一个坑啊。。。</p>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>其实这个就是个渣渣作品，要就自己拿去吧<br>我东西都放在<a href="http://oierbbs.com/forum.php?mod=viewthread&tid=233" target="_blank" rel="external">oierbbs</a>上</p>
<blockquote>
<p>以下内容都是17w13a的版本</p>
</blockquote>
<h1 id="预览图"><a href="#预览图" class="headerlink" title="预览图"></a>预览图</h1><p>博客里放不下，所以自己去oierbbs上看去。</p>
<h1 id="玩法说明"><a href="#玩法说明" class="headerlink" title="玩法说明"></a>玩法说明</h1><p>PVP/跑酷<br>碰到刺就会死，掉到最下面也会死<br>每条命三格血，被子弹打到一次掉1血<br>血没了就死了（<del>废话</del><br>材质像普通石头方块，但最上面是绿色的是重生点方块，当玩家踩在上面时就会重设重生点</p>
<h1 id="操作说明"><a href="#操作说明" class="headerlink" title="操作说明"></a>操作说明</h1><p>P1: WASD移动，SPACE攻击<br>P2: 方向键移动，数字键 1 攻击</p>
<h1 id="文件结构说明"><a href="#文件结构说明" class="headerlink" title="文件结构说明"></a>文件结构说明</h1><p>/img - 保存贴图和地图文件（.map）<br>　　stone0-13.png - 各个方块对应的贴图<br>　　sky.png - 背景图片（可自行修改，585*585像素）</p>
<h1 id="地图编辑器"><a href="#地图编辑器" class="headerlink" title="地图编辑器"></a>地图编辑器</h1><p>按o打开，左键能使方块ID+1，右键使方块ID-1。<br>非空气方块和刺方块都是可以站人的</p>
<h1 id="彩蛋"><a href="#彩蛋" class="headerlink" title="彩蛋"></a>彩蛋</h1><p>最开始调颜色的时候可以修改透明度。。甚至还能改个全透明的皮肤。。<br>自带的PVP地图强行被作者贴上了logo。。</p>
<h1 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h1><p>以后更新的时候再写吧。。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Java/">Java</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/2/"><span></span>Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  


  

  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/数论/" title="数论">数论<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/线段树/" title="线段树">线段树<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/KMP/" title="KMP">KMP<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/dp/" title="dp">dp<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/博弈论/" title="博弈论">博弈论<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/树状数组/" title="树状数组">树状数组<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/分块/" title="分块">分块<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/教程/" title="教程">教程<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/启发式搜索/" title="启发式搜索">启发式搜索<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/蒙特卡罗/" title="蒙特卡罗">蒙特卡罗<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Trie/" title="Trie">Trie<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/STL/" title="STL">STL<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/dfs/" title="dfs">dfs<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/LCT/" title="LCT">LCT<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/二分/" title="二分">二分<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/bfs/" title="bfs">bfs<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/树套树/" title="树套树">树套树<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/矩阵乘法/" title="矩阵乘法">矩阵乘法<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/BSGS/" title="BSGS">BSGS<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/毒瘤题/" title="毒瘤题">毒瘤题<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://www.bilibili.com/" target="_blank" title="2333">bilibili</a>
            
          </li>
        
          <li>
            
            	<a href="https://shenzhebei.github.io/" target="_blank" title="dalao">SHENZHEBEI</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.csdn.net/largecub233/" target="_blank" title="dalao">largecub233</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.csdn.net/Fop_zz/" target="_blank" title="dalao">Fop_zz</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.csdn.net/jzq233jzq/" target="_blank" title="dalao">jzq233jzq</a>
            
          </li>
        
          <li>
            
            	<a href="https://zhzh2001.github.io/" target="_blank" title="dalao">zhzh2001</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.csdn.net/mdnd1234/" target="_blank" title="dalao">mdnd</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.csdn.net/zhouyuyang233/" target="_blank" title="神犇">zhouyuyang233</a>
            
          </li>
        
          <li>
            
            	<a href="https://littleredstar.github.io/" target="_blank" title="GAY">black_moon</a>
            
          </li>
        
          <li>
            
            	<a href="https://problem233.github.io/" target="_blank" title="神犇">problem233</a>
            
          </li>
        
    </ul>
</div>

  


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 作为一只蒟蒻 <br/>
			我就不说什么了233</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2017 
		
		<a href="/about" target="_blank" title="SW_Wind">SW_Wind</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
