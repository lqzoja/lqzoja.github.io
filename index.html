

<!-- else -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">

<title>SW_Wind&#39;s blog</title>

<script src="/js/jquery-2.0.3.min.js"></script>
<link rel="stylesheet" type="text/css" href="/css/style.css">
<!-- Mathjax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<!-- Valine -->
<script src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/js/Valine.min.js"></script>
  </head>
  <body>
    <header>
      <div style="background-image: url(/img/author.jpg)" class="author_img"></div>
<div class="blog-title">
	<p class="title">SW_Wind&#39;s blog</p>
	<p class="subtitle">你指尖跃动的电光，是我此生不变的信仰</p>
</div>
<ul class="headerlinks">

  <li><a href="/">首页</a></li>

  <li><a href="/about">关于</a></li>

  <li><a href="/archives">档案</a></li>

</ul>
    </header>
    <div class="container">
      <div class="main">
        <div>

  
<section>
  <a href="/2017/09/22/速学-Javascript/" title="速学 Javascript (连载中)" class="link">
    <p class="desc-name"><span class="title">速学 Javascript (连载中)</span><time class="time">2017-09-22</time></p>
  </a>
  
	  
	    <div class="artc" ><h1 id="先决要求"><a href="#先决要求" class="headerlink" title="先决要求"></a>先决要求</h1><p>对以下内容有一定的了解：</p>
<ul>
<li>C/C++/Java（必须有深入的了解）</li>
<li>HTML（有点了解即可）</li>
</ul>
<h2 id="运行方法"><a href="#运行方法" class="headerlink" title="运行方法"></a>运行方法</h2><p>你可以在此页面中按<code>F12</code>打开开发者工具，切换到控制台（console），然后直接输入代码即可运行。<br>别跟我说你是 IE 内核的浏览器就行了。<br>如果你找不到控制台的话自己写个网页加个 <code>&lt;script&gt;</code> 标签即可。</p>
<h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><h2 id="变量的定义与删除"><a href="#变量的定义与删除" class="headerlink" title="变量的定义与删除"></a>变量的定义与删除</h2><h3 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h3><p>使用<code>var</code>关键字进行定义。<br>重复的定义不会清空原来变量的值。</p>
<p><strong>样例代码：</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> x; <span class="comment">// 定义了一个变量 x</span></div><div class="line"><span class="keyword">var</span> y = <span class="number">2</span>; <span class="comment">// 给 y 赋初值为 2</span></div><div class="line"><span class="built_in">console</span>.log(y); <span class="comment">// 此函数用来输出内容到控制台，自动换行</span></div><div class="line">z = <span class="number">6</span>; <span class="comment">// 其实有赋初值的话可以不用 var 关键字，但我不建议这么做</span></div><div class="line"><span class="keyword">var</span> k = z + y; <span class="comment">// 运算 z+y 并将值赋给 k</span></div><div class="line"><span class="built_in">console</span>.log(k) <span class="comment">// 其实每条语句后面不一定要用分号，但在一些容易出问题的地方还是加上比较好</span></div><div class="line"><span class="keyword">var</span> k</div><div class="line"><span class="built_in">console</span>.log(k) <span class="comment">// k 的值不会被改变</span></div></pre></td></tr></table></figure></p>
<p><strong>运行输出：</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">2</div><div class="line">8</div><div class="line">8</div></pre></td></tr></table></figure></p>
<h3 id="关于删除变量"><a href="#关于删除变量" class="headerlink" title="关于删除变量"></a>关于删除变量</h3><p>你可以使用<code>delete</code>关键字来删除变量。<br>如果成功删除变量<code>delete</code>关键字会返回<code>true</code>，否则返回<code>false</code>。</p>
<p><strong>样例代码：</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="string">'fangbo is our red sun'</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">delete</span> x)</div><div class="line"><span class="built_in">console</span>.log(x)</div></pre></td></tr></table></figure></p>
<p><strong>运行输出（Firefox）：</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">true</div><div class="line">undefined // undefined 的意思是变量 x 未定义</div></pre></td></tr></table></figure></p>
<p><strong>运行输出（Chrome）：</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">false</div><div class="line">fangbo is our red sun</div></pre></td></tr></table></figure></p>
<p>至于为什么在不同的浏览器中有不同的结果，请参阅<a href="http://blog.sina.com.cn/s/blog_54da57aa01012z64.html" target="_blank" rel="external">青竹的博客</a>。并且尽量不要使用这个关键字（反正一般也用不到）。</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>你在定义变量的时候不需要指定类型，Javascript拥有<strong>动态类型</strong>。<br>你可以使用<code>typeof</code>关键字来获取变量的类型。<br>如果你没有给一个变量赋过值，那么他的类型将会是<code>undefined</code>。<br><code>typeof</code>关键字本身的返回值类型是<code>string</code>。</p>
<p><strong>样例代码：</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> kkk</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> kkk) <span class="comment">// undefined</span></div><div class="line"></div><div class="line">kkk = <span class="string">"I love bilibili"</span> <span class="comment">// 赋值字符串，单双引号都可以，于是没有 char 这个概念</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> kkk) <span class="comment">// string</span></div><div class="line"></div><div class="line">kkk = <span class="number">3</span> <span class="comment">// 赋值数字</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> kkk) <span class="comment">// number</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="keyword">typeof</span> kkk) <span class="comment">// string</span></div></pre></td></tr></table></figure></p>
<p><strong>运行输出：</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">undefined</div><div class="line">string</div><div class="line">number</div><div class="line">string</div></pre></td></tr></table></figure></p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>Javascript 中用<code>function</code>关键字来定义函数。</p>
<h3 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h3><p>Javascript 中定义函数有3种方法。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// func 为程序名称，括号内的是参数。</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span> (<span class="params">a, b</span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">typeof</span> a + <span class="string">' '</span> + <span class="keyword">typeof</span> b); <span class="comment">// 使用加号连接字符串</span></div><div class="line">	<span class="built_in">console</span>.log(a + <span class="string">' '</span> + b); <span class="comment">// 只要加法的其中一项是字符串，其结果就是字符串</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">''</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 下面两种和第一种等效</span></div><div class="line"><span class="comment">// 变量也可以是函数</span></div><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">typeof</span> a + <span class="string">' '</span> + <span class="keyword">typeof</span> b);</div><div class="line">	<span class="built_in">console</span>.log(a + <span class="string">' '</span> + b);</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">''</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">// 这是 lambda 表达式</span></div><div class="line"><span class="keyword">var</span> func = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">typeof</span> a + <span class="string">' '</span> + <span class="keyword">typeof</span> b);</div><div class="line">	<span class="built_in">console</span>.log(a + <span class="string">' '</span> + b);</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">''</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>在调用函数的时候不必写满所有参数，此时定义时多余的参数将会是 undefined。<br>当然也可以多写参数，多余的参数将被忽略。</p>
<p><strong>样例代码：</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">func(<span class="number">233</span>, <span class="string">'I love bilibili'</span>);</div><div class="line">func(<span class="literal">false</span>);</div><div class="line">func(<span class="number">123</span>, <span class="number">345</span>, <span class="number">567</span>);</div></pre></td></tr></table></figure></p>
<p><strong>运行输出：</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">number string</div><div class="line">233 I love bilibili</div><div class="line"></div><div class="line">boolean undefined</div><div class="line">false undefined</div><div class="line"></div><div class="line">number number</div><div class="line">123 345</div></pre></td></tr></table></figure></p>
<p>如果你要定义一个不定参数数量的函数，请使用<code>function_name.arguments</code>来获取所有参数组成的数组。</p>
<p><strong>样例代码：</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> args = print.arguments;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">typeof</span> args);</div><div class="line">	<span class="comment">// for 语句和 C/C++/Java 相同</span></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; args.length; i++)</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">'args['</span> + i + <span class="string">'] = '</span> + args[i]);</div><div class="line">&#125;</div><div class="line"></div><div class="line">print(<span class="number">2325</span>, <span class="number">35235</span>, <span class="number">23623</span>, <span class="number">6</span>, <span class="number">243</span>, <span class="number">6</span>, <span class="number">543</span>, <span class="number">6</span>);</div></pre></td></tr></table></figure></p>
<p><strong>运行输出：</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">object</div><div class="line">args[0] = 2325</div><div class="line">args[1] = 35235</div><div class="line">args[2] = 23623</div><div class="line">args[3] = 6</div><div class="line">args[4] = 243</div><div class="line">args[5] = 6</div><div class="line">args[6] = 543</div><div class="line">args[7] = 6</div></pre></td></tr></table></figure></p>
<h3 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h3><p>使用<code>return</code>关键字返回函数返回值。<br><code>return</code>后面的参数也是可选的，如果没有返回任何东西函数的返回值将是<code>undefined</code>。</p>
<p><strong>样例代码：</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span> (<span class="params">a, b</span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span> (a &gt; b)</div><div class="line">		<span class="keyword">return</span> a;</div><div class="line">	<span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(func(<span class="number">56</span>, <span class="number">34</span>));</div><div class="line"><span class="built_in">console</span>.log(func(<span class="number">34</span>, <span class="number">56</span>));</div></pre></td></tr></table></figure></p>
<p><strong>运行输出：</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">56</div><div class="line">undefined</div></pre></td></tr></table></figure></p>
<h3 id="函数内变量的作用域"><a href="#函数内变量的作用域" class="headerlink" title="函数内变量的作用域"></a>函数内变量的作用域</h3><p>在函数里面定义的变量的作用域仅在函数内部，函数返回后当即失效。</p>
<p><strong>样例代码：</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> x = <span class="number">2</span>;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'In function: '</span> + <span class="keyword">typeof</span> x);</div><div class="line">&#125;</div><div class="line">func();</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Out of function: '</span> + <span class="keyword">typeof</span> x);</div></pre></td></tr></table></figure></p>
<p><strong>运行输出：</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">In function: number</div><div class="line">Out of function: undefined</div></pre></td></tr></table></figure></p>
<p>函数可以调用外部的变量。</p>
<p><strong>样例代码：</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">0</span>;</div><div class="line"><span class="built_in">console</span>.log(x);</div><div class="line"><span class="comment">// 可以用括号把匿名函数括起来，并在后面用小括号加参数进行调用。</span></div><div class="line"><span class="comment">// 但这样做基本上只是为了新开一个空间防止变量名冲突。</span></div><div class="line"><span class="comment">// 这样使用时注意前面必须使用分号隔开，否则将会编译错误。</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</div><div class="line">	x = a;</div><div class="line">&#125;)(<span class="number">52</span>);</div><div class="line"><span class="built_in">console</span>.log(x);</div></pre></td></tr></table></figure></p>
<p><strong>运行输出：</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">0</div><div class="line">52</div></pre></td></tr></table></figure></p>
<p>至此，我们愉快地学完了基础部分。<br>你现在是不是这副表情？<br><img src="/img/rscl.jpg" alt="rscl"></p>
<h1 id="Javascript-对象"><a href="#Javascript-对象" class="headerlink" title="Javascript 对象"></a>Javascript 对象</h1><blockquote>
<p>JavaScript 中的所有事物都是对象：字符串、数字、数组、日期，等等。<br>在 JavaScript 中，对象是拥有属性和方法的数据。</p>
<p class="speaker"><a href="http://www.w3school.com.cn/js/js_obj_intro.asp" target="_blank" rel="external">w3school</a></p>

</blockquote>
<p>其实 Javascript Object 和 C/C++/Java 中的<code>Map&lt;key, value&gt;</code>很像。<br>Javascript 中的元素可以用<code>object_name.key</code>或者<code>object_name[&#39;key&#39;]</code>进行存储。<br>如果<code>object_name</code>中没有<code>key</code>这个元素，将会返回<code>undefined</code>，或者你可以将其赋值。<br>具体见如下代码。</p>
<p><strong>样例代码：</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> szb = <span class="keyword">new</span> <span class="built_in">Object</span>()</div><div class="line">szb.name = <span class="string">"SHENZHEBEI"</span></div><div class="line">szb.type = <span class="string">"dalao"</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> szb.orz)</div><div class="line">szb.orz = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'orz '</span> + <span class="keyword">this</span>.name)</div><div class="line">&#125;</div><div class="line">szb.orz()</div></pre></td></tr></table></figure></p>
<p><strong>运行输出：</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">undefined</div><div class="line">orz SHENZHEBEI</div></pre></td></tr></table></figure></p>
<p>有一种方便一点的定义方法。使用如下形式：<code>{key1:value1,key2:value2,...,keyn:valuen}</code>。<br>关于逗号的使用方法：逗号是将每个键值对分开来的符号，你只需要在每两个键值对之间加上逗号即可。<br><del>虽然在最后一项的后面加上逗号也不会出错</del></p>
<p><strong>样例代码：</strong><br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> szb = &#123;</div><div class="line">	<span class="attr">name</span>: <span class="string">"SHENZHEBEI"</span>,</div><div class="line">	<span class="attr">type</span>: <span class="string">"dalao"</span>,</div><div class="line">	<span class="attr">orz</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">'orz '</span> + <span class="keyword">this</span>.name)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">szb.orz()</div></pre></td></tr></table></figure></p>
<p><strong>运行输出：</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">orz SHENZHEBEI</div></pre></td></tr></table></figure></p>
<p>然后、、、好像没了？？？<br><img src="/img/huaji.png" alt="huaji"></p>
<p>现在你应该能看懂任意一份 Javascript 代码了吧。</p>
<p>关于类型转换、自带函数、HTML 关联、jQuery 等东西还请自行 google。<br>（其实 <a href="http://www.w3school.com.cn/" target="_blank" rel="external">w3school</a> 的确是个不错的网站）<br>じゃ、さようなら。</p>
</div>
	  
	  <div class="readmore"><a href="/2017/09/22/速学-Javascript/">Read More</a></div>
  
</section>


  
<section>
  <a href="/2017/09/18/洛谷-P1726-上白泽慧音/" title="洛谷 P1726 上白泽慧音" class="link">
    <p class="desc-name"><span class="title">洛谷 P1726 上白泽慧音</span><time class="time">2017-09-18</time></p>
  </a>
  
	  
	    <div class="artc" ><h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>在幻想乡，上白泽慧音是以知识渊博闻名的老师。春雪异变导致人间之里的很多道路都被大雪堵塞，使有的学生不能顺利地到达慧音所在的村庄。因此慧音决定换一个能够聚集最多人数的村庄作为新的教学地点。人间之里由N个村庄（编号为$1…N$）和$M$条道路组成，道路分为两种一种为单向通行（<del>一方通行</del>）的，一种为双向通行的，分别用$1$和$2$来标记。如果存在由村庄$A$到达村庄$B$的通路，那么我们认为可以从村庄$A$到达村庄$B$，记为$(A,B)$。当$(A,B)$和$(B,A)$同时满足时，我们认为$A$，$B$是絶対连通的，记为$&lt;A,B&gt;$。絶対连通区域是指一个村庄的集合，在这个集合中任意两个村庄$X$,$Y$都满足$&lt;X,Y&gt;$。现在你的任务是，找出最大的絶対连通区域，并将这个絶対连通区域的村庄按编号依次输出。若存在两个最大的，输出字典序最小的，比如当存在$1,3,4$和$2,5,6$这两个最大连通区域时，输出的是$1,3,4$。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第$1$行：两个正整数$N,M$<br>第$2…M+1$行：每行三个正整数$a,b,t$，$t = 1$表示存在从村庄$a$到$b$的单向道路，$t = 2$表示村庄$a,b$之间存在双向通行的道路。保证每条道路只出现一次。</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>第$1$行：$1$个整数，表示最大的絶対连通区域包含的村庄个数。<br>第$2$行：若干个整数，依次输出最大的絶対连通区域所包含的村庄编号。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>5 5<br>1 2 1<br>1 3 2<br>2 4 2<br>5 1 2<br>3 5 1</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>3<br>1 3 5</p>
<h1 id="样例说明"><a href="#样例说明" class="headerlink" title="样例说明"></a>样例说明</h1><p>对于$60\%$的数据：$N \leq 200$且$M \leq 10,000$<br>对于$100\%$的数据：$N \leq 5,000$且$M \leq 50,000$</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>我发誓这是我最后一次抄Tarjan的模板了。<span class="hide"><del>flag</del></span><br><del>话说上白沢慧音是谁啊</del></p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100020</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&gt;<span class="string">'9'</span>||ch&lt;<span class="string">'0'</span>)ch==<span class="string">'-'</span>&amp;&amp;(f=<span class="number">0</span>)||(ch=getchar());</div><div class="line">	<span class="keyword">while</span>(ch&lt;=<span class="string">'9'</span>&amp;&amp;ch&gt;=<span class="string">'0'</span>)x=(x&lt;&lt;<span class="number">3</span>)+(x&lt;&lt;<span class="number">1</span>)+ch-<span class="string">'0'</span>,ch=getchar();</div><div class="line">	<span class="keyword">return</span> f?x:-x;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> head[N], nxt[N&lt;&lt;<span class="number">1</span>], to[N&lt;&lt;<span class="number">1</span>], cnt;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">	to[++cnt] = y; nxt[cnt] = head[x]; head[x] = cnt;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> dfn[N], low[N], tot, blo[N], bnt, que[N], qnt, sz[N];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">tarjan</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	dfn[x] = low[x] = ++tot;</div><div class="line">	que[++qnt] = x;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = head[x]; i; i = nxt[i])</div><div class="line">		<span class="keyword">if</span> (!dfn[to[i]]) tarjan(to[i]), low[x] = min(low[x], low[to[i]]);</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (!blo[to[i]]) low[x] = min(low[x], dfn[to[i]]);</div><div class="line">	<span class="keyword">if</span> (low[x] == dfn[x] &amp;&amp; ++bnt)</div><div class="line">		<span class="keyword">while</span> (que[qnt+<span class="number">1</span>] != x)</div><div class="line">			blo[que[qnt--]] = bnt, sz[bnt]++;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> n = read(), m = read();</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</div><div class="line">		<span class="keyword">int</span> x = read(), y = read(), op = read();</div><div class="line">		<span class="keyword">if</span> (op == <span class="number">2</span>) ins(x, y), ins(y, x);</div><div class="line">		<span class="keyword">else</span> ins(x, y);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		<span class="keyword">if</span> (!dfn[i]) tarjan(i);</div><div class="line">	<span class="keyword">int</span> mx = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		<span class="keyword">if</span> (sz[blo[i]] &gt; sz[mx]) mx = blo[i];</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sz[mx]);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		<span class="keyword">if</span> (blo[i] == mx) <span class="built_in">printf</span>(<span class="string">"%d "</span>, i);</div><div class="line">	<span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div>
	  
	  <div class="readmore"><a href="/2017/09/18/洛谷-P1726-上白泽慧音/">Read More</a></div>
  
</section>


  
<section>
  <a href="/2017/09/16/王强路的模拟赛T2-haiku/" title="王强路的模拟赛T2 haiku" class="link">
    <p class="desc-name"><span class="title">王强路的模拟赛T2 haiku</span><time class="time">2017-09-16</time></p>
  </a>
  
	  
	    <div class="artc" ><h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>给定一个长度为$N$的序列$a$，序列中的每个数都可以是$1\sim10$中的某一个，总共有$10^N$种序列，现在给出$N,X,Y,Z$，问有多少个长度为$N$的序列满足其有四个下标$x,y,z,w$使得$a[x]+a[x+1]+…+a[y-1]=X$，$a[y]+a[y+1]+…+a[z-1]=Y$，$a[z]+a[z+1]+…+a[w]=Z$。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>3 5 7 5</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>1</p>
<h1 id="样例解释"><a href="#样例解释" class="headerlink" title="样例解释"></a>样例解释</h1><p>在这组样例中，只存在一组合法的序列，即$a[] = [5,7,5]$。</p>
<h1 id="数据范围"><a href="#数据范围" class="headerlink" title="数据范围"></a>数据范围</h1><p>$3 \le N \le 40$。<br>$1 \le X \le 5$，$1 \le Y \le 7$，$1 \le Z \le 5$。</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>神题。。首先膜拜<a href="http://blog.csdn.net/zhouyuyang233/" target="_blank" rel="external">zyy大佬</a>用AC自动机水了此题。<br><img src="/img/orz1.jpg" alt="orz1"><img src="/img/orz2.jpg" alt="orz2"><br><del>P.S.王强路应该不会说什么的对吧</del><br>直接说正解吧。。<br>很容易想到的方法枚举所有成立的序列$a[x],a[x+1],a[x+2],…,a[z-1],a[z]$，然后计算其余位数随便取的方案数就行了。<br>但这样会有重复的出现。<br>注意到$n$、$x$、$y$、$z$都很小，于是我们可以从第一位开始dfs枚举每一位取什么。<br>如果以当前位为$z$，前面有符合条件的$x$和$y$的话，就可以直接加上后面几位随便取的方案数并返回。<br>这样就不会有重复计算的了。<br>那么问题就在于如何快速地算出有没有符合条件的$x$、$y$、$z$了。<br>标算提供了一种状压的思路。<br>我们可以用<code>&quot;1&quot;</code>来代替1，<code>&quot;10&quot;</code>来代替2，<code>&quot;100&quot;</code>来代替3，以此类推。<br>拿样例$x=5,y=7,z=5$来说，<br>这样替换一个符合条件的数组<code>[2, 3, 2, 5, 1, 4]</code>即为<code>&quot;10100101000011000&quot;</code>。<br>而$xyz$组成的数组替换后即为<code>&quot;10000100000010000&quot;</code>。<br>可以注意到，两个$01$串的<code>&amp;</code>值即为$xyz$组成的$01$串。<br>$$<br>\begin{array}<br>{}&amp;{10100101000011000}\\<br>{\&amp;}&amp;{10000100000010000}\\<br>\hline<br>{}&amp;{10000100000010000}<br>\end{array}<br>$$<br>这样就可以愉快地在$O(1)$的时间里判断是否满足条件啦。<br>具体可以看我程序。<br><img src="/img/huaji.png" alt="huaji"><br><figure class="highlight cpp"><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"bits/stdc++.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mod 1000000007</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&gt;<span class="string">'9'</span>||ch&lt;<span class="string">'0'</span>)ch==<span class="string">'-'</span>&amp;&amp;(f=<span class="number">0</span>)||(ch=getchar());</div><div class="line">	<span class="keyword">while</span>(ch&lt;=<span class="string">'9'</span>&amp;&amp;ch&gt;=<span class="string">'0'</span>)x=(x&lt;&lt;<span class="number">3</span>)+(x&lt;&lt;<span class="number">1</span>)+ch-<span class="string">'0'</span>,ch=getchar();</div><div class="line">	<span class="keyword">return</span> f?x:-x;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> f[<span class="number">41</span>][<span class="number">1</span>&lt;&lt;<span class="number">17</span>], p[<span class="number">41</span>];</div><div class="line"><span class="keyword">int</span> n, z, y, x, end_state;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span> (i == n) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">	<span class="keyword">if</span> (~f[i][j]) <span class="keyword">return</span> f[i][j];</div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= <span class="number">10</span>; k++) &#123;</div><div class="line">		<span class="keyword">int</span> next_state = (j &lt;&lt; k) | (<span class="number">1</span> &lt;&lt; k<span class="number">-1</span>);</div><div class="line">		res += ((next_state &amp; end_state) == end_state)</div><div class="line">			? p[n-i<span class="number">-1</span>] : dfs(i+<span class="number">1</span>, next_state &amp; ((<span class="number">1</span> &lt;&lt; x+y+z) - <span class="number">1</span>));</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> f[i][j] = res%mod;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span>&#123;</div><div class="line">	freopen(<span class="string">"haiku.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"haiku.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="keyword">sizeof</span>(<span class="keyword">int</span>)*<span class="number">5373952</span>);</div><div class="line">	n = read(); x = read(); y = read(); z = read(); p[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">40</span>; i++) p[i] = p[i<span class="number">-1</span>]*<span class="number">10l</span>l%mod;</div><div class="line">	end_state = (<span class="number">1</span> &lt;&lt; x+y+z<span class="number">-1</span>) | (<span class="number">1</span> &lt;&lt; y+z<span class="number">-1</span>) | (<span class="number">1</span> &lt;&lt; z<span class="number">-1</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dfs(<span class="number">0</span>, <span class="number">0</span>));</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</div>
	  
	  <div class="readmore"><a href="/2017/09/16/王强路的模拟赛T2-haiku/">Read More</a></div>
  
</section>


  
<section>
  <a href="/2017/06/22/BZOJ-4884-Lydsy2017年5月月赛-太空猫/" title="BZOJ 4884: [Lydsy2017年5月月赛]太空猫" class="link">
    <p class="desc-name"><span class="title">BZOJ 4884: [Lydsy2017年5月月赛]太空猫</span><time class="time">2017-06-22</time></p>
  </a>
  
	  
	    <div class="artc" ><h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>太空猫(SpaceCat)是一款画面精致、玩法有趣的休闲游戏，你需要控制一只坐在迷你飞碟上的猫咪在太空里不断探索，让大家看看你能飞得多远。游戏地图可以看成一个二维的网格图，上下是两段障碍物。在游戏的一开始，太空猫位于地图最左边的下边界之上，且重力方向向下。<br>在每个时刻，你可以用手指点击屏幕，翻转重力的方向，或者通过遥感控制太空猫往左或往右移动。每次翻转重力方向时，你需要消耗的能量值等于上下底边之间的高度差。在左右移动的时候，太空猫可以下降到对应重力方向更低的位置，但不能往上爬。当然，太空猫也不能穿墙而过。在重力翻转的过程中，直到碰到地面之前，你都不能操控太空猫左右移动。太空猫的终点位于地图的最右端的下底边之上，请计算为了让太空猫到达终点，需要消耗能量的最小值。<br><img src="http://www.lydsy.com/JudgeOnline/upload/201705/vv1.jpg" alt="啦啦啦"></p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第一行包含一个正整数$n(1\leq n\leq 100000)$，即地图的宽度。<br>第二行包含$n$个正整数$c_1,c_2,…,c_n(2\leq c_i\leq 10^9)$，分别表示每个横坐标对应的上边界的高度。<br>第三行包含$n$个正整数$f_1,f_2,…,f_n(1\leq f_i\lt c_i)$，分别表示每个横坐标对应的下边界的高度。</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>输出一行一个整数，即最少的能量，若无法到达终点，请输出”-1”。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>4<br>3 4 3 2<br>1 2 1 1</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>4</p>
<h1 id="HINT"><a href="#HINT" class="headerlink" title="HINT"></a>HINT</h1><p> “在左右移动的时候，太空猫【可以】下降到对应重力方向更低的位置”<br>应改为 “太空猫【会】下降到对应重力方向更低的位置”<br>就是说，太空猫在能往下掉的时候不能选择直接飞过去</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>很简单的dp。<br>f[i][0/1]表示彩虹猫在第i个位置停留在上方/下方时的最优解。。<br>先判断一下无解的情况，然后直接转移就行了。<br>40+ms WA就说明你inf设小了。。<del>（别问我怎么知道的）</del></p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100020</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">0</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&gt;<span class="string">'9'</span>||ch&lt;<span class="string">'0'</span>)&#123;ch==<span class="string">'-'</span>&amp;&amp;(f=<span class="number">1</span>);ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&lt;=<span class="string">'9'</span>&amp;&amp;ch&gt;=<span class="string">'0'</span>)&#123;x=(x&lt;&lt;<span class="number">3</span>)+(x&lt;&lt;<span class="number">1</span>)+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> f?-x:x;</div><div class="line">&#125;</div><div class="line">ll a[N], b[N];</div><div class="line">ll f[N][<span class="number">2</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> n = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) a[i] = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) b[i] = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</div><div class="line">		<span class="keyword">if</span>(b[i<span class="number">-1</span>] &gt;= a[i] || a[i<span class="number">-1</span>] &lt;= b[i] || a[i] &lt; a[i<span class="number">-1</span>] &amp;&amp; b[i] &gt; b[i<span class="number">-1</span>])</div><div class="line">			<span class="keyword">return</span> <span class="built_in">puts</span>(<span class="string">"-1"</span>)&amp;<span class="number">0</span>;</div><div class="line">	f[<span class="number">1</span>][<span class="number">0</span>] = a[<span class="number">1</span>]-b[<span class="number">1</span>];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++)&#123;</div><div class="line">		<span class="keyword">if</span>(b[i<span class="number">-1</span>] &gt;= b[i]) f[i][<span class="number">1</span>] = min(f[i<span class="number">-1</span>][<span class="number">1</span>], f[i<span class="number">-1</span>][<span class="number">0</span>]+a[i<span class="number">-1</span>]-b[i<span class="number">-1</span>]);</div><div class="line">		<span class="keyword">else</span> f[i][<span class="number">1</span>] = <span class="number">1e16</span>;</div><div class="line">		<span class="keyword">if</span>(a[i<span class="number">-1</span>] &lt;= a[i]) f[i][<span class="number">0</span>] = min(f[i<span class="number">-1</span>][<span class="number">0</span>], f[i<span class="number">-1</span>][<span class="number">1</span>]+a[i<span class="number">-1</span>]-b[i<span class="number">-1</span>]);</div><div class="line">		<span class="keyword">else</span> f[i][<span class="number">0</span>] = <span class="number">1e16</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, min(f[n][<span class="number">1</span>], f[n][<span class="number">0</span>]+a[n]-b[n]));</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div>
	  
	  <div class="readmore"><a href="/2017/06/22/BZOJ-4884-Lydsy2017年5月月赛-太空猫/">Read More</a></div>
  
</section>


  
<section>
  <a href="/2017/06/20/zyy的模拟赛-simple/" title="zyy的模拟赛 森破" class="link">
    <p class="desc-name"><span class="title">zyy的模拟赛 森破</span><time class="time">2017-06-20</time></p>
  </a>
  
	  
	    <div class="artc" ><h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>大头会求$f[n]\pmod{1e9+7}$，<br>其中$f[0]=1,f[1]=1,f[i]=f[i-1]+f[i-2]$<br>大头觉得这题实在是图样图森破。<br>他想了想，让他们求$\sum_{i=0}^nf[i]\pmod{1e9+7}$，<br>可是大头觉得这题实在还是图样图森破。<br>大头想到这么一道$H_2O$题:<br>求$\sum_{i=0}^nf[i]C_n^i\pmod{1e9+7}$的值<br>大头现在不觉得这道题图样图森破了，于是他把题目交给了你。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第一行1个数n，含义如题所示 </p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>一行一个数，表示答案。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>12</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>75025</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>模拟赛做到了这题，觉得比较巧妙，于是放出来和大家分享一下。<br><del>我想zyy应该不会说什么。。</del><br>首先你如果打表的话就会发现答案其实就是$f[2n]$<br>来证明一下。<br>显然这题要用到二项式定理。<br>$$(a+b)^n = \sum_{i=0}^nC^i_na^{n-i}b^i$$<br>关于二项式定理的证明可以看<a href="https://zh.wikipedia.org/wiki/%E4%BA%8C%E9%A1%B9%E5%BC%8F%E5%AE%9A%E7%90%86" target="_blank" rel="external">wiki</a>上的证明，这里就不赘述了。<br>这个式子是不是和要求的式子很像？<br>我们再来看看求斐波那契第i项的做法：<br>设$A=\begin{bmatrix}1&amp;1\\1&amp;0\end{bmatrix}$<br>$$f[i]=A^i[0][0]$$<br>于是我们可以得出以下结论<br>$$\begin{align}原式&amp;=\sum_{i=0}^nC_n^iA^i\\&amp;=(A+1)^n\end{align}$$<br>$1$用单位矩阵$\begin{bmatrix}1&amp;0\\0&amp;1\end{bmatrix}$代替，那么答案就是<br>$$\begin{bmatrix}2&amp;1\\1&amp;1\end{bmatrix}^n$$<br>注意到$A^2$就是$\begin{bmatrix}2&amp;1\\1&amp;1\end{bmatrix}$，所以答案就是<br>$$A^{2n}=f[2n]$$<br>代码就不用了吧。。</p>
</div>
	  
	  <div class="readmore"><a href="/2017/06/20/zyy的模拟赛-simple/">Read More</a></div>
  
</section>


  
<section>
  <a href="/2017/06/16/BZOJ-1177-Apio2009-Oil/" title="BZOJ 1177: [Apio2009]Oil" class="link">
    <p class="desc-name"><span class="title">BZOJ 1177: [Apio2009]Oil</span><time class="time">2017-06-16</time></p>
  </a>
  
	  
	    <div class="artc" ><h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>采油区域 Siruseri政府决定将石油资源丰富的Navalur省的土地拍卖给私人承包商以建立油井。被拍卖的整块土地为一个矩形区域，被划分为M×N个小块。 Siruseri地质调查局有关于Navalur土地石油储量的估测数据。这些数据表示为M×N个非负整数，即对每一小块土地石油储量的估计值。 为了避免出现垄断，政府规定每一个承包商只能承包一个由K×K块相连的土地构成的正方形区域。 AoE石油联合公司由三个承包商组成，他们想选择三块互不相交的K×K的区域使得总的收益最大。 例如，假设石油储量的估计值如下：</p>
<p>1 1 1 1 1 1 1 1 1<br>1 1 1 1 1 1 1 1 1<br>1 8 8 8 8 8 1 1 1<br>1 8 8 8 8 8 1 1 1<br>1 8 8 8 8 8 1 1 1<br>1 1 1 1 8 8 8 1 1<br>1 1 1 1 1 1 8 8 8<br>1 1 1 1 1 1 9 9 9<br>1 1 1 1 1 1 9 9 9</p>
<p>如果K = 2, AoE公司可以承包的区域的石油储量总和为100, 如果K = 3, AoE公司可以承包的区域的石油储量总和为208。 AoE公司雇佣你来写一个程序，帮助计算出他们可以承包的区域的石油储量之和的最大值。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>输入第一行包含三个整数M, N, K，其中M和N是矩形区域的行数和列数，K是每一个承包商承包的正方形的大小（边长的块数）。接下来M行，每行有N个非负整数表示这一行每一小块土地的石油储量的估计值</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>输出只包含一个整数，表示AoE公司可以承包的区域的石油储量之和的最大值。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>9 9 3<br>1 1 1 1 1 1 1 1 1<br>1 1 1 1 1 1 1 1 1<br>1 8 8 8 8 8 1 1 1<br>1 8 8 8 8 8 1 1 1<br>1 8 8 8 8 8 1 1 1<br>1 1 1 1 8 8 8 1 1<br>1 1 1 1 1 1 8 8 8<br>1 1 1 1 1 1 9 9 9<br>1 1 1 1 1 1 9 9 9</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>208</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>很裸的dp。<br>预先处理好以(i,j)为左上角、右上角、左下角、右下角时整块区域中k*k的最大值以及每行每列的最大值。<br>接着分为六种情况暴力枚举就好了。<br>强迫症的我愣是把他们画了出来。^ω^<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">+---+---+---+  +-----------+  +---+-------+</div><div class="line">|   |   |   |  |           |  |   |       |</div><div class="line">|   |   |   |  +-----------+  |   |       |</div><div class="line">|   |   |   |  |           |  |   +-------+</div><div class="line">|   |   |   |  +-----------+  |   |       |</div><div class="line">|   |   |   |  |           |  |   |       |</div><div class="line">+---+---+---+  +-----------+  +---+-------+</div><div class="line"></div><div class="line">+-------+---+  +-----+-----+  +-----------+</div><div class="line">|       |   |  |     |     |  |           |</div><div class="line">|       |   |  |     |     |  +-----+-----+</div><div class="line">+-------+   |  |     |     |  |     |     |</div><div class="line">|       |   |  +-----+-----+  |     |     |</div><div class="line">|       |   |  |           |  |     |     |</div><div class="line">+-------+---+  +-----------+  +-----+-----+</div></pre></td></tr></table></figure></p>
<p><strong>这题读入优化会RE！读入优化会RE！读入优化会RE！</strong><br><del>垃圾题目降我AC率</del></p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 1505</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> x; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x); <span class="keyword">return</span> x;</div><div class="line">	<span class="comment">// int x=0,f=0;char ch=getchar();</span></div><div class="line">	<span class="comment">// while(ch&gt;'9'||ch&lt;'0')&#123;if(ch=='-')f=1;ch=getchar();&#125;</span></div><div class="line">	<span class="comment">// while(ch&lt;='9'&amp;&amp;ch&gt;='0')&#123;x=(x&lt;&lt;3)+(x&lt;&lt;1)+ch-'0';ch=getchar();&#125;</span></div><div class="line">	<span class="comment">// return f?-x:x;</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> sum[N][N], tr[N][N], a[N][N], b[N][N], c[N][N], d[N][N], h[N], l[N], ans;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span></span>&#123;<span class="keyword">return</span> max(max(a, b), c);&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> n = read(), m = read(), k = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</div><div class="line">			sum[i][j] = read()+sum[i][j<span class="number">-1</span>]+sum[i<span class="number">-1</span>][j]-sum[i<span class="number">-1</span>][j<span class="number">-1</span>];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = k; i &lt;= n; i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = k; j &lt;= m; j++)&#123;</div><div class="line">			tr[i][j] = sum[i][j]-sum[i][j-k]-sum[i-k][j]+sum[i-k][j-k];</div><div class="line">			h[i] = max(h[i], tr[i][j]); l[j] = max(l[j], tr[i][j]);</div><div class="line">		&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = k; i &lt;= n; i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = k; j &lt;= m; j++)</div><div class="line">			a[i][j] = max(a[i<span class="number">-1</span>][j], a[i][j<span class="number">-1</span>], tr[i][j]);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = k; i &lt;= n; i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = m-k+<span class="number">1</span>; j; j--)</div><div class="line">			b[i][j] = max(b[i<span class="number">-1</span>][j], b[i][j+<span class="number">1</span>], tr[i][j+k<span class="number">-1</span>]);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = n-k+<span class="number">1</span>; i; i--)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = k; j &lt;= m; j++)</div><div class="line">			c[i][j] = max(c[i+<span class="number">1</span>][j], c[i][j<span class="number">-1</span>], tr[i+k<span class="number">-1</span>][j]);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = n-k+<span class="number">1</span>; i; i--)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = m-k+<span class="number">1</span>; j; j--)</div><div class="line">			d[i][j] = max(d[i+<span class="number">1</span>][j], d[i][j+<span class="number">1</span>], tr[i+k<span class="number">-1</span>][j+k<span class="number">-1</span>]);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = k; i &lt;= n-k; i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = k; j &lt;= m-k; j++)&#123;</div><div class="line">			ans = max(ans, a[i][m]+c[i+<span class="number">1</span>][j]+d[i+<span class="number">1</span>][j+<span class="number">1</span>]);</div><div class="line">			ans = max(ans, c[i+<span class="number">1</span>][m]+b[i][j+<span class="number">1</span>]+a[i][j]);</div><div class="line">			ans = max(ans, a[n][j]+b[i][j+<span class="number">1</span>]+d[i+<span class="number">1</span>][j+<span class="number">1</span>]);</div><div class="line">			ans = max(ans, b[n][j+<span class="number">1</span>]+a[i][j]+c[i+<span class="number">1</span>][j]);</div><div class="line">		&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = k; i &lt;= n-k*<span class="number">2</span>; i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = i+k; j &lt;= n-k; j++)</div><div class="line">			ans = max(ans, b[i][<span class="number">1</span>]+h[j]+d[j+<span class="number">1</span>][<span class="number">1</span>]);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = k; i &lt;= m-k*<span class="number">2</span>; i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = i+k; j &lt;= m-k; j++)</div><div class="line">			ans = max(ans, c[<span class="number">1</span>][i]+l[j]+d[<span class="number">1</span>][j+<span class="number">1</span>]);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div>
	  
	  <div class="readmore"><a href="/2017/06/16/BZOJ-1177-Apio2009-Oil/">Read More</a></div>
  
</section>


  
<section>
  <a href="/2017/06/15/BZOJ-2561-最小生成树/" title="BZOJ 2561: 最小生成树" class="link">
    <p class="desc-name"><span class="title">BZOJ 2561: 最小生成树</span><time class="time">2017-06-15</time></p>
  </a>
  
	  
	    <div class="artc" ><h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>给定一个边带正权的连通无向图G=(V,E)，其中N=|V|，M=|E|，N个点从1到N依次编号，给定三个正整数u，v，和L (u≠v)，假设现在加入一条边权为L的边(u,v)，那么需要删掉最少多少条边，才能够使得这条边既可能出现在最小生成树上，也可能出现在最大生成树上？</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第一行包含用空格隔开的两个整数，分别为N和M；<br>接下来M行，每行包含三个正整数u，v和w表示图G存在一条边权为w的边(u,v)。<br>最后一行包含用空格隔开的三个整数，分别为u，v，和 L；<br>数据保证图中没有自环。</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>输出一行一个整数表示最少需要删掉的边的数量。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>3 2<br>3 2 1<br>1 2 3<br>1 2 2</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>1</p>
<h1 id="HINT"><a href="#HINT" class="headerlink" title="HINT"></a>HINT</h1><p>对于20%的数据满足$N\leq 10，M\leq 20，L\leq 20$；<br>对于50%的数据满足$N\leq 300，M\leq 3000，L\leq 200$；<br>对于100%的数据满足$N\leq 20000，M\leq 200000，L\leq 20000$。</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>若要使边出现在最小生成树上，那么必须保证边权比他小的边无法将u与v连通。<br>因此把所有边权小于L的边加入网络流中，然后跑一边最小割就好了。<br>最大生成树同理。<br><del>模板打错WA了两发</del></p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 1000007</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> zyy 1000000007</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">0</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&gt;<span class="string">'9'</span>||ch&lt;<span class="string">'0'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&lt;=<span class="string">'9'</span>&amp;&amp;ch&gt;=<span class="string">'0'</span>)&#123;x=(x&lt;&lt;<span class="number">3</span>)+(x&lt;&lt;<span class="number">1</span>)+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> f?-x:x;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> to[N], nxt[N], head[N], val[N], dep[N], cnt = <span class="number">1</span>, st, ed, q[N], ans;</div><div class="line"><span class="keyword">int</span> x[N], y[N], z[N];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> z)</span></span>&#123;</div><div class="line">	to[++cnt] = y; nxt[cnt] = head[x]; val[cnt] = z; head[x] = cnt;</div><div class="line">	to[++cnt] = x; nxt[cnt] = head[y]; val[cnt] = z; head[y] = cnt;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="built_in">memset</span>(dep, <span class="number">0</span>, <span class="keyword">sizeof</span> dep);</div><div class="line">	<span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="number">1</span>; q[<span class="number">1</span>] = st; dep[st] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(l &lt; r)&#123;</div><div class="line">		<span class="keyword">int</span> x = q[++l];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = head[x]; i; i = nxt[i])</div><div class="line">			<span class="keyword">if</span>(val[i] &amp;&amp; !dep[to[i]])&#123;</div><div class="line">				q[++r] = to[i];</div><div class="line">				dep[to[i]] = dep[x]+<span class="number">1</span>;</div><div class="line">			&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> dep[ed];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(x == ed) <span class="keyword">return</span> f;</div><div class="line">	<span class="keyword">int</span> sum = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = head[x]; i; i = nxt[i])&#123;</div><div class="line">		<span class="keyword">if</span>(val[i] &amp;&amp; dep[to[i]] == dep[x]+<span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">int</span> w = dfs(to[i], min(f-sum, val[i]));</div><div class="line">			val[i] -= w; val[i^<span class="number">1</span>] += w;</div><div class="line">			sum += w; <span class="keyword">if</span>(sum == f) <span class="keyword">return</span> f;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!sum) dep[x] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">return</span> sum;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> n = read(), m = read(), ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</div><div class="line">		x[i] = read(), y[i] = read(), z[i] = read();</div><div class="line">	st = read(); ed = read(); <span class="keyword">int</span> c = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</div><div class="line">		<span class="keyword">if</span>(z[i] &lt; c) ins(x[i], y[i], <span class="number">1</span>);</div><div class="line">	<span class="keyword">while</span>(bfs())ans+=dfs(st, <span class="number">1</span>&lt;&lt;<span class="number">30</span>);</div><div class="line">	cnt = <span class="number">1</span>; <span class="built_in">memset</span>(head, <span class="number">0</span>, <span class="keyword">sizeof</span> head);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</div><div class="line">		<span class="keyword">if</span>(z[i] &gt; c) ins(x[i], y[i], <span class="number">1</span>);</div><div class="line">	<span class="keyword">while</span>(bfs())ans+=dfs(st, <span class="number">1</span>&lt;&lt;<span class="number">30</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">&#125;</div></pre></td></tr></table></figure></div>
	  
	  <div class="readmore"><a href="/2017/06/15/BZOJ-2561-最小生成树/">Read More</a></div>
  
</section>


  
<section>
  <a href="/2017/06/05/BZOJ-2822-AHOI2012-树屋阶梯/" title="BZOJ 2822: [AHOI2012]树屋阶梯" class="link">
    <p class="desc-name"><span class="title">BZOJ 2822: [AHOI2012]树屋阶梯</span><time class="time">2017-06-05</time></p>
  </a>
  
	  
	    <div class="artc" ><h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>暑假期间，小龙报名了一个模拟野外生存作战训练班来锻炼体魄，训练的第一个晚上，教官就给他们出了个难题。由于地上露营湿气重，必须选择在高处的树屋露营。小龙分配的树屋建立在一颗高度为N+1尺（N为正整数）的大树上，正当他发愁怎么爬上去的时候，发现旁边堆满了一些空心四方钢材（如图1.1），经过观察和测量，这些钢材截面的宽和高大小不一，但都是1尺的整数倍，教官命令队员们每人选取N个空心钢材来搭建一个总高度为N尺的阶梯来进入树屋，该阶梯每一步台阶的高度为1尺，宽度也为1尺。如果这些钢材有各种尺寸，且每种尺寸数量充足，那么小龙可以有多少种搭建方法？（注：为了避免夜里踏空，钢材空心的一面绝对不可以向上。）<br><img src="http://www.lydsy.com/JudgeOnline/upload/201305/1(6).jpg"><br>以树屋高度为4尺、阶梯高度N=3尺为例，小龙一共有如图1.2所示的5种<br>搭建方法：<br><img src="http://www.lydsy.com/JudgeOnline/upload/201305/2(1).jpg"></p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>一个正整数 $N(1≤N≤500)$，表示阶梯的高度</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>一个正整数，表示搭建方法的个数。（注：搭建方法个数可能很大。）</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>3</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>5</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>ans[3]=5。。。是不是想到了什么。。。</p>
<p>给个证明吧。。<br>首先比如这么一张图<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">*</div><div class="line">+*</div><div class="line">++*</div><div class="line">#++*</div></pre></td></tr></table></figure></p>
<p>我们注意到每个切割出来的矩形都必需包括一块标示为*的小正方形，那么我们此时枚举每个*与#标示的两角作为矩形，剩下的两个小阶梯就是我们的两个更小的子问题了，于是我们的注意到这里的式子<br>$$C_4=C_0*C_3+C_1*C_2+C_2*C_1+C_3*C_0$$<br>这就是卡特兰数的递推公式。。。<br>然后我毫不要脸的用了python。<br>233333</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight python"><table><tr><td class="code"><pre><div class="line">n = int(raw_input())</div><div class="line">f = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(n+<span class="number">1</span>)]</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(x)</span>:</span></div><div class="line">	<span class="keyword">if</span> f[x]:</div><div class="line">		<span class="keyword">return</span> f[x]</div><div class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(x):</div><div class="line">		f[x] += get(x<span class="number">-1</span>-i)*get(i)</div><div class="line">	<span class="keyword">return</span> f[x]</div><div class="line"></div><div class="line">f[<span class="number">1</span>] = f[<span class="number">0</span>] = <span class="number">1</span></div><div class="line">print(get(n))</div></pre></td></tr></table></figure></div>
	  
	  <div class="readmore"><a href="/2017/06/05/BZOJ-2822-AHOI2012-树屋阶梯/">Read More</a></div>
  
</section>


  
<section>
  <a href="/2017/06/05/BZOJ-1095-ZJOI2007-Hide-捉迷藏/" title="BZOJ 1095: [ZJOI2007]Hide 捉迷藏" class="link">
    <p class="desc-name"><span class="title">BZOJ 1095: [ZJOI2007]Hide 捉迷藏</span><time class="time">2017-06-05</time></p>
  </a>
  
	  
	    <div class="artc" ><h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>捉迷藏 Jiajia和Wind是一对恩爱的夫妻，并且他们有很多孩子。某天，Jiajia、Wind和孩子们决定在家里玩捉迷藏游戏。他们的家很大且构造很奇特，由N个屋子和N-1条双向走廊组成，这N-1条走廊的分布使得任意两个屋子都互相可达。游戏是这样进行的，孩子们负责躲藏，Jiajia负责找，而Wind负责操纵这N个屋子的灯。在起初的时候，所有的灯都没有被打开。每一次，孩子们只会躲藏在没有开灯的房间中，但是为了增加刺激性，孩子们会要求打开某个房间的电灯或者关闭某个房间的电灯。为了评估某一次游戏的复杂性，Jiajia希望知道可能的最远的两个孩子的距离（即最远的两个关灯房间的距离）。 我们将以如下形式定义每一种操作： C(hange) i 改变第i个房间的照明状态，若原来打开，则关闭；若原来关闭，则打开。 G(ame) 开始一次游戏，查询最远的两个关灯房间的距离。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第一行包含一个整数N，表示房间的个数，房间将被编号为1,2,3…N的整数。接下来N-1行每行两个整数a, b，表示房间a与房间b之间有一条走廊相连。接下来一行包含一个整数Q，表示操作次数。接着Q行，每行一个操作，如上文所示。</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>对于每一个操作Game，输出一个非负整数到hide.out，表示最远的两个关灯房间的距离。若只有一个房间是关着灯的，输出0；若所有房间的灯都开着，输出-1。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>8<br>1 2<br>2 3<br>3 4<br>3 5<br>3 6<br>6 7<br>6 8<br>7<br>G<br>C 1<br>G<br>C 2<br>G<br>C 1<br>G</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>4<br>3<br>3<br>4</p>
<h1 id="HINT"><a href="#HINT" class="headerlink" title="HINT"></a>HINT</h1><p>对于100%的数据，$N\leq 100000,M\leq 500000$。</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>居然还可以把树的直径用线段树来求。。。涨姿势了。</p>
<blockquote>
<p>大家一起膜拜<a href="http://www.shuizilong.com/house/archives/bzoj-1095-zjoi2007hide-%E6%8D%89%E8%BF%B7%E8%97%8F/" target="_blank" rel="external">岛娘</a>吧 - hzwer</p>
</blockquote>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight cpp"><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> maxs(a,b,c) max(max(a,b),c)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100020</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ST -6</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ED -9</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">1</span> &lt;&lt; <span class="number">30</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">0</span>; <span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&gt;<span class="string">'9'</span>||ch&lt;<span class="string">'0'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span>&amp;&amp;ch&lt;=<span class="string">'9'</span>)&#123;x=(x&lt;&lt;<span class="number">1</span>)+(x&lt;&lt;<span class="number">3</span>)+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> f?-x:x;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> v[N*<span class="number">3</span>], c[N], pos[N], tot, cnt, ccnt;</div><div class="line"><span class="keyword">int</span> head[N], to[N&lt;&lt;<span class="number">1</span>], nxt[N&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">	to[++cnt] = y; nxt[cnt] = head[x]; head[x] = cnt;</div><div class="line">	to[++cnt] = x; nxt[cnt] = head[y]; head[y] = cnt;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> fa)</span></span>&#123;</div><div class="line">	v[++tot] = ST; v[++tot] = x;</div><div class="line">	pos[x] = tot;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = head[x]; i; i = nxt[i])</div><div class="line">		<span class="keyword">if</span>(to[i] != fa) dfs(to[i], x);</div><div class="line">	v[++tot] = ED;</div><div class="line">&#125;</div><div class="line"><span class="keyword">struct</span> node&#123;</div><div class="line">	<span class="keyword">int</span> c1, c2, l1, l2, r1, r2, l, r, dis;</div><div class="line">	<span class="keyword">friend</span> node <span class="keyword">operator</span> + (<span class="keyword">const</span> node &amp;a, <span class="keyword">const</span> node &amp;b) &#123;</div><div class="line">		node c;</div><div class="line">		c.l = a.l; c.r = b.r;</div><div class="line">		c.dis = max(a.dis, b.dis);</div><div class="line">		c.dis = maxs(c.dis, a.r1+b.l2, a.r2+b.l1);</div><div class="line">		<span class="keyword">if</span>(a.c2 &lt; b.c1) c.c1 = a.c1-a.c2+b.c1, c.c2 = b.c2;</div><div class="line">		<span class="keyword">else</span> c.c1 = a.c1, c.c2 = a.c2-b.c1+b.c2;</div><div class="line">		c.r1 = maxs(b.r1, a.r1-b.c1+b.c2, a.r2+b.c1+b.c2);</div><div class="line">		c.r2 = max(b.r2, a.r2+b.c1-b.c2);</div><div class="line">		c.l1 = maxs(a.l1, b.l1-a.c2+a.c1, b.l2+a.c2+a.c1);</div><div class="line">		c.l2 = max(a.l2, b.l2+a.c2-a.c1);</div><div class="line">		<span class="keyword">return</span> c;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">		l = r = x;</div><div class="line">		dis = -inf;</div><div class="line">		c1 = c2 = <span class="number">0</span>;</div><div class="line">		<span class="keyword">if</span>(v[x] == ST) c2 = <span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span>(v[x] == ED) c1 = <span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span>(v[x] &gt; <span class="number">0</span> &amp;&amp; c[v[x]]) l1 = l2 = r1 = r2 = <span class="number">0</span>;</div><div class="line">		<span class="keyword">else</span> l1 = l2 = r1 = r2 = -inf;</div><div class="line">	&#125;</div><div class="line">&#125;t[N*<span class="number">12</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> k)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(t[x].l == t[x].r) <span class="keyword">return</span> t[x].init(t[x].l);</div><div class="line">	<span class="keyword">int</span> mid = t[x].l + t[x].r &gt;&gt; <span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(k &lt;= mid) update(x&lt;&lt;<span class="number">1</span>, k);</div><div class="line">	<span class="keyword">else</span> update(x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, k);</div><div class="line">	t[x] = t[x&lt;&lt;<span class="number">1</span>]+t[x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(l == r) <span class="keyword">return</span> t[x].init(l);</div><div class="line">	<span class="keyword">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</div><div class="line">	build(x&lt;&lt;<span class="number">1</span>, l, mid); build(x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, mid+<span class="number">1</span>, r);</div><div class="line">	t[x] = t[x&lt;&lt;<span class="number">1</span>]+t[x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> n = read(); ccnt = n;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) c[i] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) ins(read(), read());</div><div class="line">	dfs(<span class="number">1</span>, <span class="number">0</span>); build(<span class="number">1</span>, <span class="number">1</span>, tot);</div><div class="line">	<span class="keyword">int</span> m = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)&#123;</div><div class="line">		<span class="keyword">if</span>(getchar() == <span class="string">'C'</span>)&#123;</div><div class="line">			<span class="keyword">int</span> x = read();</div><div class="line">			<span class="keyword">if</span>(c[x]) ccnt--;</div><div class="line">			<span class="keyword">else</span> ccnt++;</div><div class="line">			c[x] ^= <span class="number">1</span>;</div><div class="line">			update(<span class="number">1</span>, pos[x]);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span>&#123; getchar();</div><div class="line">			<span class="keyword">if</span>(!ccnt) <span class="built_in">puts</span>(<span class="string">"-1"</span>);</div><div class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(ccnt == <span class="number">1</span>) <span class="built_in">puts</span>(<span class="string">"0"</span>);</div><div class="line">			<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, t[<span class="number">1</span>].dis);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div>
	  
	  <div class="readmore"><a href="/2017/06/05/BZOJ-1095-ZJOI2007-Hide-捉迷藏/">Read More</a></div>
  
</section>


  
<section>
  <a href="/2017/06/02/BZOJ-2654-tree/" title="BZOJ 2654: tree" class="link">
    <p class="desc-name"><span class="title">BZOJ 2654: tree</span><time class="time">2017-06-02</time></p>
  </a>
  
	  
	    <div class="artc" ><h1 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h1><p>给你一个无向带权连通图，每条边是黑色或白色。让你求一棵最小权的恰好有need条白色边的生成树。<br>题目保证有解。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第一行V,E,need分别表示点数，边数和需要的白色边数。<br>接下来E行,每行s,t,c,col表示这边的端点(点从0开始标号)，边权，颜色(0白色1黑色)。</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>一行表示所求生成树的边权和。<br>$V\leq 50000,E\leq 100000$,所有数据边权为[1,100]中的正整数。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>2 2 1<br>0 1 1 1<br>0 1 2 0</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>2</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>先说一个错误的贪心。。<br>按c把边从小到大排序<br>然后先把need条白边取了<br>然后在剩下的里面取n-1-need条边就行了<br>代码如下<br><figure class="highlight cpp"><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">0</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&gt;<span class="string">'9'</span>||ch&lt;<span class="string">'0'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&lt;=<span class="string">'9'</span>&amp;&amp;ch&gt;=<span class="string">'0'</span>)&#123;x=(x&lt;&lt;<span class="number">3</span>)+(x&lt;&lt;<span class="number">1</span>)+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> f?-x:x;</div><div class="line">&#125;</div><div class="line"><span class="keyword">struct</span> node&#123;</div><div class="line">	<span class="keyword">int</span> x, y, c, t;</div><div class="line">	<span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> node &amp;a, <span class="keyword">const</span> node &amp;b)&#123;</div><div class="line">		<span class="keyword">return</span> a.c &lt; b.c;</div><div class="line">	&#125;</div><div class="line">&#125;a[<span class="number">100020</span>];</div><div class="line"><span class="keyword">int</span> vis[<span class="number">100020</span>], fa[<span class="number">50020</span>], ans, tot;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> fa[x]==x?x:fa[x]=find(fa[x]);&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> n = read(), m = read(), need = read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)&#123;</div><div class="line">		a[i].x = read(); a[i].y = read();</div><div class="line">		a[i].c = read(); a[i].t = read();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) fa[i] = i;</div><div class="line">	sort(a+<span class="number">1</span>, a+m+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)&#123;</div><div class="line">		<span class="keyword">if</span>(a[i].t) <span class="keyword">continue</span>; vis[i] = <span class="number">1</span>;</div><div class="line">		<span class="keyword">int</span> x = find(a[i].x), y = find(a[i].y);</div><div class="line">		<span class="keyword">if</span>(x == y) <span class="keyword">continue</span>; fa[x] = y;</div><div class="line">		ans += a[i].c; tot++;</div><div class="line">		<span class="keyword">if</span>(!--need) <span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)<span class="keyword">if</span>(!vis[i])&#123;</div><div class="line">		<span class="keyword">int</span> x = find(a[i].x), y = find(a[i].y);</div><div class="line">		<span class="keyword">if</span>(x == y) <span class="keyword">continue</span>; fa[x] = y;</div><div class="line">		ans += a[i].c; <span class="keyword">if</span>(++tot == n<span class="number">-1</span>) <span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后这题就能过了。。但是评论中有人Hack掉了。。那么我们就改一下。。<br><del>算了，我懒癌犯了</del></p>
</div>
	  
	  <div class="readmore"><a href="/2017/06/02/BZOJ-2654-tree/">Read More</a></div>
  
</section>



  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/">Next<span></span></a>
  </nav>

</div>
      </div>
      <aside class="sidebar">

  <div class="hitokoto">
  <p class="sidebar-title">一言</p>
  <div class="hitokoto-text" id="yiyan-text">Loading...</div>
  <div class="hitokoto-author" id="yiyan-author"></div>
  <script type="text/javascript">$.get("https://sslapi.hitokoto.cn/?c=ac",function(data){var yy=JSON.parse(data);$('#yiyan-text').html(yy.hitokoto);$('#yiyan-author').html('《'+yy.from+'》');})</script>
</div>

  <div class="linkslist">
  <p class="sidebar-title">友情链接</p>
  <div class="sidebar-main">
    <ul>
      <li><a href="https://shenzhebei.github.io/" target="_blank">SHENZHEBEI</a></li>
      <li><a href="http://blog.csdn.net/largecub233/" target="_blank">largecub233</a></li>
      <li><a href="http://blog.csdn.net/Fop_zz/" target="_blank">Fop_zz</a></li>
      <li><a href="http://blog.csdn.net/jzq233jzq/" target="_blank">jzq233jzq</a></li>
      <li><a href="https://zhzh2001.github.io/" target="_blank">zhzh2001</a></li>
      <li><a href="http://blog.csdn.net/mdnd1234/" target="_blank">mdnd</a></li>
      <li><a href="http://www.bilibili.com/" target="_blank">bilibili(乱入)</a></li>
      <li><a href="http://blog.csdn.net/zhouyuyang233/" target="_blank">zhouyuyang233</a></li>
      <li><a href="https://littleredstar.github.io/" target="_blank">black_moon</a></li>
      <li><a href="https://problem233.github.io/" target="_blank">problem233</a></li>
      <li><a href="http://blog.csdn.net/nn020701/" target="_blank">nn020701</a></li>
    </ul>
  </div>
</div>

</aside>
    </div>
    <footer>
      <p>Powered by <a href="https://hexo.io/" target="_view">Hexo</a> and theme by <a href="https://github.com/swwind/hacker" target="_view">Hacker</a></p>
    </footer>
    <!-- It must be a script element -->
  </body>
</html>

